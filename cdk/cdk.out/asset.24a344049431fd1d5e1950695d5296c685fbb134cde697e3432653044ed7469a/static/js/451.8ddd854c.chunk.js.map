{"version":3,"file":"static/js/451.8ddd854c.chunk.js","mappings":"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","sources":["components/chat/ConversationDrawer.js","hooks/useConversations.js","components/ModelSelector.js","utils/clipboard.js","hooks/useChat.js","hooks/useOrchestration.js","hooks/useWebSocket.js","components/SimpleChatMessage.js","components/chat/ChatWindow.js","hooks/useMessages.js","components/PromptCardManager.js","components/AdminView.js","components/UserView.js","components/ProjectDetail.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useConversations } from \"../../hooks/useConversations\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { conversationAPI } from \"../../services/api\";\n\nconst ConversationDrawer = ({\n  isOpen,\n  onClose,\n  className = \"\",\n  onCollapsedChange,\n}) => {\n  const {\n    conversations,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    createConversation,\n    deleteConversation,\n    updateConversation,\n  } = useConversations();\n\n  const { currentConversationId, setCurrentConversation } =\n    useConversationContext();\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [createError, setCreateError] = useState(null);\n  const [deletingId, setDeletingId] = useState(null);\n  const [deleteError, setDeleteError] = useState(null);\n  const [activeMenuId, setActiveMenuId] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState(\"\");\n\n  //     ref\n  const conversationListRef = useRef(null);\n\n  //       \n  useEffect(() => {\n    if (\n      conversationListRef.current &&\n      conversations.length > 0 &&\n      !isCollapsed\n    ) {\n      conversationListRef.current.scrollTop =\n        conversationListRef.current.scrollHeight;\n    }\n  }, [conversations.length, isCollapsed]);\n\n  //     \n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (activeMenuId && !event.target.closest(\".conversation-menu\")) {\n        setActiveMenuId(null);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [activeMenuId]);\n\n  //   \n  const handleNewChat = async () => {\n    if (isCreating) return;\n\n    setIsCreating(true);\n    setCreateError(null);\n\n    try {\n      console.log(\" [DEBUG]    \");\n      const newConversation = await createConversation(\" \");\n      console.log(\" [DEBUG]    :\", {\n        newConversation,\n        conversationId: newConversation?.id,\n        conversationIdType: typeof newConversation?.id,\n        isConversationIdNull: newConversation?.id === null,\n        isConversationIdUndefined: newConversation?.id === undefined,\n      });\n\n      console.log(\n        \" [DEBUG] setCurrentConversation   -  ID:\",\n        currentConversationId\n      );\n      setCurrentConversation(newConversation.id);\n      console.log(\n        \" [DEBUG] setCurrentConversation   -  ID:\",\n        newConversation.id\n      );\n\n      if (window.innerWidth < 768) {\n        onClose();\n      }\n    } catch (error) {\n      console.error(\"   :\", error);\n      setCreateError(\"    .  .\");\n      setTimeout(() => setCreateError(null), 3000);\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  //  \n  const handleSelectConversation = (conversationId) => {\n    setCurrentConversation(conversationId);\n\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n  };\n\n  //  \n  const handleDeleteConversation = async (conversationId, event) => {\n    event.stopPropagation(); //   \n\n    if (!window.confirm(\"  ?\")) {\n      return;\n    }\n\n    setDeletingId(conversationId);\n    setDeleteError(null);\n    setActiveMenuId(null); //  \n\n    try {\n      await deleteConversation(conversationId);\n\n      //         \n      if (\n        currentConversationId === conversationId &&\n        conversations.length > 1\n      ) {\n        const remainingConversations = conversations.filter(\n          (conv) => conv.id !== conversationId\n        );\n        if (remainingConversations.length > 0) {\n          setCurrentConversation(remainingConversations[0].id);\n        }\n      }\n\n      console.log(\"  :\", conversationId);\n    } catch (error) {\n      console.error(\"   :\", error);\n      //  API       \n      // setDeleteError('   .  .');\n      // setTimeout(() => setDeleteError(null), 3000);\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  //   \n  const handleStartEdit = (conversationId, currentTitle, event) => {\n    event.stopPropagation();\n    setEditingId(conversationId);\n    setEditingTitle(currentTitle);\n    setActiveMenuId(null); //  \n  };\n\n  //   \n  const handleSaveEdit = async (conversationId) => {\n    if (!editingTitle.trim()) {\n      setEditingId(null);\n      setEditingTitle(\"\");\n      return;\n    }\n\n    try {\n      // API    \n      console.log(\"  :\", conversationId, editingTitle);\n      await conversationAPI.updateConversation(conversationId, {\n        title: editingTitle,\n      });\n\n      //   \n      updateConversation(conversationId, { title: editingTitle });\n\n      setEditingId(null);\n      setEditingTitle(\"\");\n\n      console.log(\"   \");\n    } catch (error) {\n      console.error(\"    :\", error);\n      //   \n      alert(\"  .  .\");\n    }\n  };\n\n  //   \n  const handleCancelEdit = () => {\n    setEditingId(null);\n    setEditingTitle(\"\");\n  };\n\n  //  \n  const handleToggleMenu = (conversationId, event) => {\n    event.stopPropagation();\n    setActiveMenuId(activeMenuId === conversationId ? null : conversationId);\n  };\n\n  //   \n  const groupConversationsByDate = (conversations) => {\n    const groups = {};\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    conversations.forEach((conversation) => {\n      const date = new Date(\n        conversation.lastActivityAt || conversation.createdAt\n      );\n      const isToday = date.toDateString() === today.toDateString();\n      const isYesterday = date.toDateString() === yesterday.toDateString();\n\n      let key;\n      if (isToday) {\n        key = \"Today\";\n      } else if (isYesterday) {\n        key = \"Yesterday\";\n      } else {\n        const monthYear = date.toLocaleDateString(\"ko-KR\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n        });\n        key = monthYear;\n      }\n\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(conversation);\n    });\n\n    return groups;\n  };\n\n  const conversationGroups = groupConversationsByDate(conversations);\n\n  return (\n    <>\n      {/*   */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\"\n          onClick={onClose}\n        />\n      )}\n\n      {/*   */}\n      <div\n        className={`\n        conversation-drawer\n        fixed top-0 left-0 h-full z-[9999]\n        bg-[#0d1117]\n        border-r border-[#21262d] shadow-[inset_0_0_16px_rgba(0,0,0,0.4)]\n        transform transition-all duration-500 ease-out\n        ${isOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n        md:translate-x-0\n        ${isCollapsed ? \"w-14\" : \"w-full md:w-64\"}\n        ${className}\n      `}\n        style={{ overscrollBehavior: \"contain\" }}\n      >\n        {/*  -    */}\n        {!isCollapsed && (\n          <div className=\"flex items-center justify-between p-5 border-b border-[#21262d] relative transition-opacity duration-300 ease-in-out\">\n            <h1 className=\"text-xl font-semibold tracking-tight text-[#e6edf3]\">\n              TITLE-NOMICS\n            </h1>\n\n            {/*    */}\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\" \"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/*      */}\n        {isCollapsed && (\n          <div className=\"p-2 flex justify-center border-b border-[#21262d]\">\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\" \"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200 rotate-180\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/*    */}\n        {!isCollapsed && (\n          <div className=\"p-4 border-b border-[#21262d] transition-opacity duration-300 ease-in-out\">\n            <button\n              onClick={handleNewChat}\n              disabled={isCreating}\n              className=\"group w-full flex items-center justify-start gap-3 px-3 py-2.5 text-[#e6edf3] hover:bg-[#21262d] disabled:bg-[#374151] rounded-lg text-sm transition-all duration-200 focus:outline-none border border-[#6e7681] hover:border-[#8b949e]\"\n              title=\" \"\n            >\n              {isCreating ? (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-[#e6edf3]\"></div>\n                  </div>\n                  <span className=\"font-medium\"> ...</span>\n                </>\n              ) : (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      strokeWidth=\"2\"\n                      stroke=\"currentColor\"\n                      className=\"h-4 w-4 group-hover:scale-110 transition-transform duration-200\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M12 4.5v15m7.5-7.5h-15\"\n                      />\n                    </svg>\n                  </div>\n                  <span className=\"font-medium\"> </span>\n                </>\n              )}\n            </button>\n\n            {(createError || deleteError) && (\n              <div className=\"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-center\">\n                <p className=\"text-xs text-red-400\">\n                  {createError || deleteError}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/*   */}\n        <div\n          ref={conversationListRef}\n          className=\"flex flex-col gap-0.5 overflow-y-auto h-[calc(100vh-210px)] custom-scrollbar\"\n          onScroll={(e) => e.stopPropagation()}\n        >\n          <style jsx>{`\n            /* CSS Custom Properties for Design System */\n            .conversation-drawer {\n              --color-bg-primary: #0d1117;\n              --color-bg-secondary: #11161f;\n              --color-bg-tertiary: #161b22;\n              --color-border: #21262d;\n              --color-text-primary: #e6edf3;\n              --color-text-secondary: #88929d;\n              --color-accent: #10b981;\n              --color-accent-hover: #059669;\n              --color-danger: #f85149;\n              --shadow-depth: inset 0 0 16px rgba(0, 0, 0, 0.4);\n            }\n\n            .custom-scrollbar::-webkit-scrollbar {\n              width: 8px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-track {\n              background: transparent;\n              border-radius: 4px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb {\n              background: var(--color-border);\n              border-radius: 4px;\n              border: 1px solid var(--color-bg-primary);\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n              background: #30363d;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:active {\n              background: #484f58;\n            }\n            .custom-scrollbar::-webkit-scrollbar-corner {\n              background: transparent;\n            }\n\n            /*    */\n            .custom-scrollbar {\n              overscroll-behavior: contain;\n              scroll-behavior: smooth;\n            }\n          `}</style>\n\n          {error && !isCollapsed && (\n            <div className=\"p-4 text-center bg-red-900/30 rounded-lg border border-red-700/50 mb-4\">\n              <div className=\"text-red-300 text-sm font-medium\">{error}</div>\n            </div>\n          )}\n\n          {conversations.length === 0 && !loading && !error && !isCollapsed && (\n            <div className=\"p-6 text-center\">\n              <div className=\"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl flex items-center justify-center shadow-lg border border-gray-700/30\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth=\"1.5\"\n                  stroke=\"currentColor\"\n                  className=\"h-6 w-6 text-gray-400\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\"\n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-sm font-medium text-white mb-2 drop-shadow\">\n                  \n              </h3>\n              <p className=\"text-xs text-gray-400 leading-snug opacity-80\">\n                   AI !\n              </p>\n            </div>\n          )}\n\n          {/*   */}\n          {loading && conversations.length === 0 && !isCollapsed && (\n            <div className=\"flex flex-col gap-1\">\n              {[...Array(5)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"w-full h-10 px-3 bg-gray-900/40 animate-pulse flex items-center\"\n                >\n                  <div className=\"h-3 bg-gray-700/40 rounded w-3/4\"></div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/*     */}\n          {!isCollapsed && conversations.length > 0 && (\n            <div className=\"flex flex-col gap-1 transition-opacity duration-300 ease-in-out\">\n              {Object.entries(conversationGroups).map(\n                ([groupTitle, groupConversations]) => (\n                  <div key={groupTitle}>\n                    {/*    */}\n                    <div className=\"text-xs text-white/40 uppercase tracking-wide py-2 px-3 font-medium\">\n                      {groupTitle}\n                    </div>\n\n                    {/*    */}\n                    {groupConversations.map((conversation) => (\n                      <div\n                        key={conversation.id}\n                        className={`\n                        flex items-center justify-between h-10 px-3 py-2 text-sm transition-colors duration-200 relative\n                        ${\n                          currentConversationId === conversation.id\n                            ? \"bg-[#161b22] text-[#e6edf3] relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-[2px] before:bg-[#10b981]\"\n                            : \"text-[#88929d] hover:bg-[#11161f] hover:text-[#e6edf3]\"\n                        }\n                      `}\n                      >\n                        {editingId === conversation.id ? (\n                          //  \n                          <div className=\"flex-1 flex items-center gap-2\">\n                            <input\n                              type=\"text\"\n                              value={editingTitle}\n                              onChange={(e) => setEditingTitle(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === \"Enter\") {\n                                  handleSaveEdit(conversation.id);\n                                } else if (e.key === \"Escape\") {\n                                  handleCancelEdit();\n                                }\n                              }}\n                              className=\"flex-1 bg-[#0d1117] border border-[#21262d] rounded px-2 py-1 text-sm text-[#e6edf3] focus:outline-none focus:border-[#10b981]\"\n                              autoFocus\n                            />\n                            <button\n                              onClick={() => handleSaveEdit(conversation.id)}\n                              className=\"p-1 text-[#10b981] hover:bg-[#161b22] rounded\"\n                              title=\"\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"m4.5 12.75 6 6 9-13.5\"\n                                />\n                              </svg>\n                            </button>\n                            <button\n                              onClick={handleCancelEdit}\n                              className=\"p-1 text-[#88929d] hover:text-[#f85149] hover:bg-[#161b22] rounded\"\n                              title=\"\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"M6 18L18 6M6 6l12 12\"\n                                />\n                              </svg>\n                            </button>\n                          </div>\n                        ) : (\n                          //  \n                          <>\n                            <button\n                              onClick={() =>\n                                handleSelectConversation(conversation.id)\n                              }\n                              className=\"flex-1 text-left truncate focus:outline-none py-2\"\n                              title={conversation.title}\n                            >\n                              <span className=\"truncate text-sm font-medium\">\n                                {conversation.title || \" \"}\n                              </span>\n                            </button>\n\n                            {/*   */}\n                            <div className=\"conversation-menu relative\">\n                              <button\n                                onClick={(e) =>\n                                  handleToggleMenu(conversation.id, e)\n                                }\n                                className=\"ml-2 py-2 px-2 text-[#88929d] hover:text-[#e6edf3] transition-colors duration-200 flex-shrink-0 rounded-md hover:bg-[#161b22]\"\n                                title=\"\"\n                              >\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  strokeWidth=\"1.5\"\n                                  stroke=\"currentColor\"\n                                  className=\"h-5 w-5\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    d=\"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"\n                                  />\n                                </svg>\n                              </button>\n\n                              {/*   */}\n                              {activeMenuId === conversation.id && (\n                                <div className=\"absolute right-0 top-full mt-1 bg-[#21262d] border border-[#30363d] rounded-md shadow-lg z-50 min-w-[120px]\">\n                                  <button\n                                    onClick={(e) =>\n                                      handleStartEdit(\n                                        conversation.id,\n                                        conversation.title,\n                                        e\n                                      )\n                                    }\n                                    className=\"w-full px-3 py-2 text-sm text-[#e6edf3] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200\"\n                                  >\n                                    <svg\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                      fill=\"none\"\n                                      viewBox=\"0 0 24 24\"\n                                      strokeWidth=\"1.5\"\n                                      stroke=\"currentColor\"\n                                      className=\"h-4 w-4\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n                                      />\n                                    </svg>\n                                    \n                                  </button>\n                                  <button\n                                    onClick={(e) =>\n                                      handleDeleteConversation(\n                                        conversation.id,\n                                        e\n                                      )\n                                    }\n                                    disabled={deletingId === conversation.id}\n                                    className=\"w-full px-3 py-2 text-sm text-[#f85149] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200 disabled:opacity-50\"\n                                  >\n                                    {deletingId === conversation.id ? (\n                                      <div className=\"animate-spin rounded-full h-4 w-4 border-b border-[#f85149]\"></div>\n                                    ) : (\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        fill=\"none\"\n                                        viewBox=\"0 0 24 24\"\n                                        strokeWidth=\"1.5\"\n                                        stroke=\"currentColor\"\n                                        className=\"h-4 w-4\"\n                                      >\n                                        <path\n                                          strokeLinecap=\"round\"\n                                          strokeLinejoin=\"round\"\n                                          d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n                                        />\n                                      </svg>\n                                    )}\n                                    \n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )\n              )}\n            </div>\n          )}\n\n          {/*       */}\n          {isCollapsed && (\n            <div className=\"flex flex-col items-center p-2 transition-opacity duration-300 ease-in-out\">\n              <button\n                onClick={handleNewChat}\n                disabled={isCreating}\n                className=\"w-10 h-10 bg-[#21262d] hover:bg-[#30363d] disabled:bg-[#374151] text-white rounded-full flex items-center justify-center transition-colors duration-200 focus:outline-none border border-[#30363d] hover:border-[#444c56]\"\n                title=\" \"\n              >\n                {isCreating ? (\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                ) : (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth=\"2\"\n                    stroke=\"currentColor\"\n                    className=\"h-6 w-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M12 4.5v15m7.5-7.5h-15\"\n                    />\n                  </svg>\n                )}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/*    -      */}\n        {loading && conversations.length > 0 && (\n          <div className=\"p-4 text-center\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mx-auto\"></div>\n          </div>\n        )}\n\n        {/*    */}\n        {hasMore && !loading && conversations.length > 0 && !isCollapsed && (\n          <div className=\"p-4 text-center\">\n            <button\n              onClick={loadMore}\n              className=\"text-xs text-white/60 hover:text-white/80 transition-colors duration-200 px-3 py-1.5 hover:bg-gray-800/40 rounded\"\n            >\n               \n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default ConversationDrawer;\n","import { useState, useEffect, useCallback } from 'react';\nimport { conversationAPI, mockConversations } from '../services/api';\n\n/**\n *      \n *     \n */\nexport const useConversations = () => {\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [nextCursor, setNextCursor] = useState(null);\n\n  //    \n  const loadConversations = useCallback(async (reset = false) => {\n    if (loading) return;\n    \n    setLoading(true);\n    setError(null);\n\n    try {\n      const cursor = reset ? null : nextCursor;\n      const response = await conversationAPI.getConversations(cursor);\n      \n      if (reset) {\n        setConversations(response.conversations);\n      } else {\n        setConversations(prev => [...prev, ...response.conversations]);\n      }\n      \n      setHasMore(response.hasMore);\n      setNextCursor(response.nextCursor);\n      \n    } catch (err) {\n      console.error('   :', err);\n      console.error('Error details:', {\n        message: err.message,\n        status: err.response?.status,\n        data: err.response?.data,\n        config: err.config\n      });\n      \n      //    \n      let errorMessage = '   .';\n      if (err.code === 'ERR_NETWORK') {\n        errorMessage = '  .';\n      } else if (err.response?.status === 403) {\n        errorMessage = '  .';\n      } else if (err.response?.status >= 500) {\n        errorMessage = '  .    .';\n      }\n      \n      setError(errorMessage);\n      \n      // API  mock  fallback\n      if (reset) {\n        console.log('API , mock  ');\n        setConversations(mockConversations);\n        setHasMore(false);\n        setNextCursor(null);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, nextCursor]);\n\n  //   \n  const createConversation = useCallback(async (title) => {\n    try {\n      const response = await conversationAPI.createConversation(title);\n      const newConversation = {\n        id: response.conversationId,\n        title: response.title,\n        startedAt: response.startedAt,\n        lastActivityAt: response.lastActivityAt,\n        tokenSum: 0\n      };\n      \n      //      \n      setConversations(prev => [newConversation, ...prev]);\n      \n      return newConversation;\n    } catch (err) {\n      console.error('  :', err);\n      \n      // API  mock  fallback\n      const mockConversation = {\n        id: Date.now().toString(),\n        title: title || 'New Conversation',\n        startedAt: new Date().toISOString(),\n        lastActivityAt: new Date().toISOString(),\n        tokenSum: 0\n      };\n      \n      setConversations(prev => [mockConversation, ...prev]);\n      return mockConversation;\n    }\n  }, []);\n\n  //   (  ,  )\n  const updateConversation = useCallback((conversationId, updates) => {\n    setConversations(prev => \n      prev.map(conv => \n        conv.id === conversationId \n          ? { ...conv, ...updates, lastActivityAt: new Date().toISOString() }\n          : conv\n      )\n    );\n  }, []);\n\n  //  \n  const deleteConversation = useCallback(async (conversationId) => {\n    try {\n      // API    \n      await conversationAPI.deleteConversation(conversationId);\n      console.log('API  :', conversationId);\n    } catch (err) {\n      console.warn('API  ,  :', err);\n      // API     \n    }\n    \n    // API /  UI \n    setConversations(prev => prev.filter(conv => conv.id !== conversationId));\n    \n    return true;\n  }, []);\n\n  //   (UI ,    )\n  const removeConversation = useCallback((conversationId) => {\n    setConversations(prev => prev.filter(conv => conv.id !== conversationId));\n  }, []);\n\n  //    ( )\n  const loadMore = useCallback(() => {\n    if (hasMore && !loading) {\n      loadConversations(false);\n    }\n  }, [hasMore, loading, loadConversations]);\n\n  // \n  const refresh = useCallback(() => {\n    loadConversations(true);\n  }, [loadConversations]);\n\n  //  \n  useEffect(() => {\n    loadConversations(true);\n  }, []);\n\n  return {\n    conversations,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    refresh,\n    createConversation,\n    updateConversation,\n    deleteConversation,\n    removeConversation\n  };\n};","import React, { useState } from \"react\";\nimport { ChevronDownIcon, SparklesIcon } from \"@heroicons/react/24/outline\";\n\nconst MODELS = [\n  // Anthropic Claude  ()\n  {\n    id: \"anthropic.claude-3-5-sonnet-20241022-v2:0\",\n    name: \"Claude 3.5 Sonnet v2\",\n    provider: \"Anthropic\",\n    category: \"premium\",\n    speed: \"\",\n    quality: \"\",\n    description: \" ,  ,   \",\n    recommended: true,\n  },\n  {\n    id: \"anthropic.claude-3-5-haiku-20241022-v1:0\",\n    name: \"Claude 3.5 Haiku\",\n    provider: \"Anthropic\",\n    category: \"fast\",\n    speed: \" \",\n    quality: \"\",\n    description: \" ,   \",\n    recommended: true,\n  },\n  {\n    id: \"anthropic.claude-sonnet-4-v1:0\",\n    name: \"Claude Sonnet 4\",\n    provider: \"Anthropic\",\n    category: \"premium\",\n    speed: \"\",\n    quality: \"\",\n    description: \"    ,  \",\n    new: true,\n  },\n  {\n    id: \"anthropic.claude-opus-4-v1:0\",\n    name: \"Claude Opus 4\",\n    provider: \"Anthropic\",\n    category: \"premium\",\n    speed: \"\",\n    quality: \"\",\n    description: \"     \",\n    new: true,\n  },\n  {\n    id: \"anthropic.claude-3-opus-20240229-v1:0\",\n    name: \"Claude 3 Opus\",\n    provider: \"Anthropic\",\n    category: \"premium\",\n    speed: \"\",\n    quality: \"\",\n    description: \"    ,  \",\n  },\n  {\n    id: \"anthropic.claude-3-sonnet-20240229-v1:0\",\n    name: \"Claude 3 Sonnet\",\n    provider: \"Anthropic\",\n    category: \"balanced\",\n    speed: \"\",\n    quality: \"\",\n    description: \"  \",\n  },\n  {\n    id: \"anthropic.claude-3-haiku-20240307-v1:0\",\n    name: \"Claude 3 Haiku\",\n    provider: \"Anthropic\",\n    category: \"fast\",\n    speed: \"\",\n    quality: \"\",\n    description: \",  \",\n  },\n\n  // Amazon Nova \n  {\n    id: \"amazon.nova-pro-v1:0\",\n    name: \"Nova Pro\",\n    provider: \"Amazon\",\n    category: \"balanced\",\n    speed: \"\",\n    quality: \"\",\n    description: \" ,  ,  \",\n    recommended: true,\n  },\n  {\n    id: \"amazon.nova-lite-v1:0\",\n    name: \"Nova Lite\",\n    provider: \"Amazon\",\n    category: \"fast\",\n    speed: \" \",\n    quality: \"\",\n    description: \"   ,  \",\n  },\n  {\n    id: \"amazon.nova-micro-v1:0\",\n    name: \"Nova Micro\",\n    provider: \"Amazon\",\n    category: \"fast\",\n    speed: \"\",\n    quality: \"\",\n    description: \"    \",\n  },\n\n  // Meta Llama \n  {\n    id: \"meta.llama3-3-70b-instruct-v1:0\",\n    name: \"Llama 3.3 70B\",\n    provider: \"Meta\",\n    category: \"balanced\",\n    speed: \"\",\n    quality: \"\",\n    description: \" ,  ,  \",\n  },\n  {\n    id: \"meta.llama3-2-3b-instruct-v1:0\",\n    name: \"Llama 3.2 3B\",\n    provider: \"Meta\",\n    category: \"fast\",\n    speed: \"\",\n    quality: \"\",\n    description: \"   \",\n  },\n];\n\nconst ModelSelector = ({ selectedModel, onModelChange }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState(\"all\");\n\n  console.log(\" ModelSelector :\", { selectedModel, isOpen });\n\n  const currentModel =\n    MODELS.find((model) => model.id === selectedModel) || MODELS[0];\n\n  const filteredModels = MODELS.filter((model) => {\n    if (filter === \"all\") return true;\n    return model.provider.toLowerCase() === filter;\n  });\n\n  const handleModelSelect = (modelId) => {\n    onModelChange(modelId);\n    setIsOpen(false);\n  };\n\n  return (\n    <div className=\"relative\">\n      {/*    -   */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600 shadow-sm transition-all duration-200 text-xs\"\n        title={`${currentModel.name} (${currentModel.provider})`}\n      >\n        <SparklesIcon className=\"h-3.5 w-3.5 text-blue-600 dark:text-blue-400\" />\n        <span className=\"text-gray-700 dark:text-gray-300 font-medium\">\n          {currentModel.name.replace(/Claude |Llama |Nova /, \"\")}\n        </span>\n        <ChevronDownIcon\n          className={`h-3 w-3 text-gray-500 transition-transform ${\n            isOpen ? \"rotate-180\" : \"\"\n          }`}\n        />\n      </button>\n\n      {/*   */}\n      {isOpen && (\n        <div className=\"absolute bottom-full left-0 mb-2 bg-white dark:bg-dark-secondary  rounded-lg shadow-lg z-50 max-h-[400px] overflow-hidden min-w-[300px]\">\n          {/*   */}\n          <div className=\"p-3 \">\n            <div className=\"flex gap-1 text-xs\">\n              {[\n                { key: \"all\", label: \"\" },\n                { key: \"anthropic\", label: \"Anthropic\" },\n                { key: \"amazon\", label: \"Amazon\" },\n                { key: \"meta\", label: \"Meta\" },\n              ].map((filterOption) => (\n                <button\n                  key={filterOption.key}\n                  onClick={() => setFilter(filterOption.key)}\n                  className={`px-2 py-1 rounded transition-colors ${\n                    filter === filterOption.key\n                      ? \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                      : \"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-tertiary\"\n                  }`}\n                >\n                  {filterOption.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/*   */}\n          <div className=\"max-h-[300px] overflow-y-auto\">\n            {filteredModels.map((model) => (\n              <button\n                key={model.id}\n                onClick={() => handleModelSelect(model.id)}\n                className={`w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 last:border-b-0 transition-colors ${\n                  model.id === selectedModel\n                    ? \"bg-blue-50 dark:bg-blue-900/20\"\n                    : \"\"\n                }`}\n              >\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"mb-1\">\n                    <span className=\"font-medium text-gray-900 dark:text-white\">\n                      {model.name}\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">\n                    {model.provider}  : {model.speed}  :{\" \"}\n                    {model.quality}\n                  </div>\n                  <div className=\"text-xs text-gray-600 dark:text-gray-400\">\n                    {model.description}\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/*     */}\n      {isOpen && (\n        <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\n      )}\n    </div>\n  );\n};\n\nexport default ModelSelector;\n","import { toast } from \"react-hot-toast\";\n\n/**\n *     \n * @param {string} text -  \n * @param {string} successMessage -    \n * @param {string} errorMessage -    \n * @returns {Promise<boolean>} -  \n */\nexport const copyToClipboard = async (\n  text,\n  successMessage = \" !\",\n  errorMessage = \" .\"\n) => {\n  try {\n    await navigator.clipboard.writeText(text);\n    toast.success(successMessage);\n    return true;\n  } catch (error) {\n    console.error(\" :\", error);\n    toast.error(errorMessage);\n    return false;\n  }\n};\n\n/**\n *    \n * @param {string} text -  \n * @returns {Promise<boolean>} -  \n */\nexport const copyTitlesOnly = async (text) => {\n  const extractedTitles = extractTitles(text);\n  const textToCopy =\n    extractedTitles.length > 0 ? extractedTitles.join(\"\\n\") : text;\n  return copyToClipboard(textToCopy, \"  !\");\n};\n\n/**\n *    \n * @param {string} text -  \n * @returns {Array<string>} -   \n */\nexport const extractTitles = (text) => {\n  const titles = [];\n\n  // 1.  : \"1. []\"\n  const numberedMatches = text.match(/^\\d+\\.\\s+(.+?)(?=\\n\\s*-|$)/gm);\n  if (numberedMatches) {\n    numberedMatches.forEach((match) => {\n      const title = match.replace(/^\\d+\\.\\s+/, \"\").trim();\n      if (title && !title.includes(\" \")) {\n        titles.push(title);\n      }\n    });\n  }\n\n  // 2. Bullet : \" []\"\n  if (titles.length === 0) {\n    const bulletMatches = text.match(/ \"([^\"]+)\"/g);\n    if (bulletMatches) {\n      bulletMatches.forEach((match) => {\n        const title = match.replace(/ \"(.+)\"/, \"$1\").trim();\n        if (title) {\n          titles.push(title);\n        }\n      });\n    }\n  }\n\n  // 3.  Bullet \n  if (titles.length === 0) {\n    const simpleBulletMatches = text.match(/ ([^\\n]+)/g);\n    if (simpleBulletMatches) {\n      simpleBulletMatches.forEach((match) => {\n        const title = match.replace(\" \", \"\").trim();\n        if (title && !title.includes(\":\") && title.length < 100) {\n          titles.push(title);\n        }\n      });\n    }\n  }\n\n  return titles;\n};\n","import { useState, useEffect, useRef, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { copyToClipboard } from \"../utils/clipboard\";\nimport { useOrchestration } from \"./useOrchestration\";\nimport { useWebSocket } from \"./useWebSocket\";\nimport { crewAPI, handleAPIError } from \"../services/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\n/**\n * - AI   UI    \n */\nconst processMultiAgentResponse = (result) => {\n  if (!result) {\n    console.error(\"-  :  \", result);\n    return {\n      id: \"error-\" + Date.now(),\n      type: \"assistant\",\n      content: \"   .  .\",\n      timestamp: new Date().toISOString(),\n      isError: true,\n    };\n  }\n\n  // -  \n  const agentResults = result.agentResults || {};\n  const finalTitles = result.finalTitles || {};\n  const tokenUsage = result.tokenUsage || 0;\n\n  //   \n  const agentSummary = Object.keys(agentResults).map((agentType) => {\n    const agentResult = agentResults[agentType];\n    const titles = finalTitles[agentType] || [];\n\n    return {\n      agentType,\n      agentName: getAgentName(agentType),\n      result: agentResult?.content || \" \",\n      titles: titles,\n      tokenCount: agentResult?.tokenCount || 0,\n    };\n  });\n\n  //    \n  const allTitles = Object.values(finalTitles).flat();\n\n  return {\n    id: \"multi-agent-\" + Date.now(),\n    type: \"assistant\",\n    content: formatMultiAgentContent(agentSummary, allTitles),\n    timestamp: new Date(),\n    // -  \n    isMultiAgent: true,\n    agentResults: agentSummary,\n    allTitles: allTitles,\n    tokenUsage: tokenUsage,\n  };\n};\n\n/**\n *     \n */\nconst getAgentName = (agentType) => {\n  const agentNames = {\n    journalism: \"  \",\n    balanced: \"  \",\n    click: \" \",\n    seo: \" SEO/AEO \",\n    social: \"  \",\n  };\n  return agentNames[agentType] || ` ${agentType}`;\n};\n\n/**\n * -  UI   \n */\nconst formatMultiAgentContent = (agentSummary, allTitles) => {\n  let content = \" **-  **\\n\\n\";\n\n  //   \n  if (allTitles.length > 0) {\n    content += \" **  :**\\n\";\n    allTitles.forEach((title, index) => {\n      content += `${index + 1}. ${title}\\n`;\n    });\n    content += \"\\n\";\n  }\n\n  //   \n  content += \" **  :**\\n\\n\";\n  agentSummary.forEach((agent) => {\n    content += `### ${agent.agentName}\\n`;\n    if (agent.titles.length > 0) {\n      content += \"** :**\\n\";\n      agent.titles.forEach((title) => {\n        content += ` ${title}\\n`;\n      });\n    }\n    content += `** :** ${agent.tokenCount}\\n\\n`;\n  });\n\n  return content;\n};\n\n/**\n *     \n * @param {string} projectId -  ID\n * @param {string} projectName -  \n * @param {Array} promptCards -   \n * @returns {Object} -    \n */\nexport const useChat = (\n  projectId,\n  projectName,\n  promptCards = [],\n  conversationId = null\n) => {\n  const { user } = useAuth(); // Add user from AuthContext\n\n  //   (  )\n  const isFirstRender = useRef(true);\n  if (isFirstRender.current) {\n    console.log(\"useChat :\", {\n      projectId,\n      projectName,\n      promptCardsLength: promptCards?.length,\n      conversationId,\n      userId: user?.id,\n    });\n    isFirstRender.current = false;\n  }\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [copiedMessage, setCopiedMessage] = useState(null);\n  const [canSendMessage, setCanSendMessage] = useState(true);\n  const [inputHeight, setInputHeight] = useState(24); //   \n  const [selectedModel, setSelectedModel] = useState(\n    \"anthropic.claude-3-5-sonnet-20241022-v2:0\"\n  );\n  const streamingMessageIdRef = useRef(null);\n  const currentWebSocketRef = useRef(null);\n  const currentExecutionIdRef = useRef(null);\n\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  //    \n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const scrollContainerRef = useRef(null);\n  const lastScrollTopRef = useRef(0);\n\n  const {\n    isExecuting: isGenerating,\n    isStreaming,\n    executeOrchestration,\n    resetOrchestration,\n  } = useOrchestration(projectId);\n\n  // WebSocket  \n  const {\n    isConnected: wsConnected,\n    isConnecting: wsConnecting,\n    error: wsError,\n    startStreaming: wsStartStreaming,\n    addMessageListener,\n    removeMessageListener,\n  } = useWebSocket(projectId);\n\n  //    - projectId  \n  useEffect(() => {\n    setMessages([]); //   \n  }, [projectId]); // projectName  projectId \n\n  //    \n  const handleScroll = useCallback(() => {\n    if (!scrollContainerRef.current) return;\n\n    const container = scrollContainerRef.current;\n    const currentScrollTop = container.scrollTop;\n    const maxScrollTop = container.scrollHeight - container.clientHeight;\n\n    //    \n    if (Math.abs(currentScrollTop - lastScrollTopRef.current) > 2) {\n      const isAtBottom = currentScrollTop >= maxScrollTop - 20;\n\n      //      ,     \n      setIsUserScrolling(!isAtBottom);\n    }\n\n    lastScrollTopRef.current = currentScrollTop;\n  }, []);\n\n  const scrollToBottom = useCallback(() => {\n    //       \n    if (!isUserScrolling && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [isUserScrolling]);\n\n  //      (    )\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n\n  // WebSocket   \n  useEffect(() => {\n    const handleWebSocketMessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        console.log(\"WebSocket  :\", data);\n\n        const currentStreamingId = streamingMessageIdRef.current;\n\n        switch (data.type) {\n          case \"stream_start\":\n            console.log(\"WebSocket  \");\n            break;\n\n          case \"progress\":\n            //     UI  \n            console.log(` : ${data.step} (${data.progress}%)`);\n            break;\n\n          case \"stream_chunk\":\n            if (currentStreamingId) {\n              setMessages((prev) => {\n                const updatedMessages = [...prev];\n                const streamingMsgIndex = updatedMessages.findIndex(\n                  (msg) => msg.id === currentStreamingId\n                );\n\n                console.log(\"  :\", {\n                  currentStreamingId,\n                  streamingMsgIndex,\n                  messagesLength: prev.length,\n                  content: data.content,\n                });\n\n                if (streamingMsgIndex !== -1) {\n                  //     \n                  const currentContent =\n                    updatedMessages[streamingMsgIndex].content || \"\";\n\n                  updatedMessages[streamingMsgIndex] = {\n                    ...updatedMessages[streamingMsgIndex],\n                    content: currentContent + data.content,\n                    isLoading: true,\n                    isStreaming: true,\n                  };\n\n                  console.log(\n                    \" :\",\n                    updatedMessages[streamingMsgIndex]\n                  );\n                } else {\n                  console.log(\n                    \"    ,  ID:\",\n                    prev.map((m) => m.id)\n                  );\n                }\n\n                return updatedMessages;\n              });\n              //         \n              if (!isUserScrolling) {\n                scrollToBottom();\n              }\n            } else {\n              console.log(\"currentStreamingId null\");\n            }\n            break;\n\n          case \"stream_complete\":\n            if (currentStreamingId) {\n              setMessages((prev) => {\n                const updatedMessages = [...prev];\n                const streamingMsgIndex = updatedMessages.findIndex(\n                  (msg) => msg.id === currentStreamingId\n                );\n\n                if (streamingMsgIndex !== -1) {\n                  updatedMessages[streamingMsgIndex] = {\n                    ...updatedMessages[streamingMsgIndex],\n                    content: data.fullContent,\n                    isLoading: false,\n                    isStreaming: false,\n                    timestamp: new Date().toISOString(),\n                  };\n                }\n\n                return updatedMessages;\n              });\n              streamingMessageIdRef.current = null;\n              scrollToBottom();\n            }\n            break;\n\n          case \"error\":\n            console.error(\"WebSocket  :\", data.message);\n            if (currentStreamingId) {\n              setMessages((prev) => {\n                const updatedMessages = [...prev];\n                const streamingMsgIndex = updatedMessages.findIndex(\n                  (msg) => msg.id === currentStreamingId\n                );\n\n                if (streamingMsgIndex !== -1) {\n                  //      \n                  let errorContent =\n                    \"    .  .\";\n\n                  if (\n                    data.message?.includes(\"401\") ||\n                    data.message?.includes(\"Unauthorized\")\n                  ) {\n                    errorContent =\n                      \" .  .\";\n                  } else if (\n                    data.message?.includes(\"timeout\") ||\n                    data.message?.includes(\" \")\n                  ) {\n                    errorContent =\n                      \"  .      .\";\n                  } else if (\n                    data.message?.includes(\"rate limit\") ||\n                    data.message?.includes(\"\")\n                  ) {\n                    errorContent =\n                      \"  .    .\";\n                  }\n\n                  updatedMessages[streamingMsgIndex] = {\n                    ...updatedMessages[streamingMsgIndex],\n                    content: errorContent,\n                    isLoading: false,\n                    isStreaming: false,\n                    isError: true,\n                    timestamp: new Date().toISOString(),\n                  };\n                }\n\n                return updatedMessages;\n              });\n              streamingMessageIdRef.current = null;\n            }\n\n            //    \n            const toastMessage = data.message?.includes(\"401\")\n              ? \" \"\n              : \"   \";\n            toast.error(toastMessage);\n            break;\n\n          default:\n            console.log(\"   WebSocket  :\", data.type);\n        }\n      } catch (error) {\n        console.error(\"WebSocket   :\", error);\n      }\n    };\n\n    if (wsConnected) {\n      addMessageListener(handleWebSocketMessage);\n    }\n\n    return () => {\n      if (wsConnected) {\n        removeMessageListener(handleWebSocketMessage);\n      }\n    };\n  }, [wsConnected, addMessageListener, removeMessageListener, scrollToBottom]);\n\n  /**\n   *    \n   */\n  const handleStreamingResponse = useCallback(\n    (chunk, metadata) => {\n      const currentStreamingId = streamingMessageIdRef.current;\n\n      console.log(\" :\", chunk, \" ID:\", currentStreamingId);\n\n      if (!currentStreamingId) {\n        console.error(\" ID !\");\n        return;\n      }\n\n      setMessages((prev) => {\n        const updatedMessages = [...prev];\n        const streamingMsgIndex = updatedMessages.findIndex(\n          (msg) => msg.id === currentStreamingId\n        );\n\n        if (streamingMsgIndex !== -1) {\n          //    \n          updatedMessages[streamingMsgIndex] = {\n            ...updatedMessages[streamingMsgIndex],\n            content: updatedMessages[streamingMsgIndex].content + chunk,\n            isLoading: true,\n            isStreaming: true,\n          };\n          console.log(\n            \"   :\",\n            updatedMessages[streamingMsgIndex].content\n          );\n        } else {\n          console.error(\"    :\", currentStreamingId);\n        }\n\n        return updatedMessages;\n      });\n\n      //   (    )\n      if (!isUserScrolling) {\n        scrollToBottom();\n      }\n    },\n    [scrollToBottom, isUserScrolling]\n  );\n\n  /**\n   *    \n   */\n  const handleStreamingComplete = useCallback(\n    (result) => {\n      const currentStreamingId = streamingMessageIdRef.current;\n\n      console.log(\" :\", result, \" ID:\", currentStreamingId);\n\n      if (!currentStreamingId) {\n        console.error(\"    ID !\");\n        return;\n      }\n\n      setMessages((prev) => {\n        const updatedMessages = [...prev];\n        const streamingMsgIndex = updatedMessages.findIndex(\n          (msg) => msg.id === currentStreamingId\n        );\n\n        if (streamingMsgIndex !== -1) {\n          //    \n          updatedMessages[streamingMsgIndex] = {\n            ...updatedMessages[streamingMsgIndex],\n            content: result.result,\n            isLoading: false,\n            isStreaming: false,\n            performance_metrics: result.performance_metrics,\n            model_info: result.model_info,\n            timestamp: new Date().toISOString(),\n          };\n          console.log(\n            \"   :\",\n            updatedMessages[streamingMsgIndex].content\n          );\n        } else {\n          console.error(\n            \"       :\",\n            currentStreamingId\n          );\n        }\n\n        return updatedMessages;\n      });\n\n      //  ID \n      streamingMessageIdRef.current = null;\n\n      //  \n      console.log(\"WebSocket   -  \");\n      setCanSendMessage(true);\n\n      //   (    )\n      scrollToBottom();\n    },\n    [scrollToBottom]\n  );\n\n  /**\n   *   \n   */\n  const handleStopGeneration = useCallback(() => {\n    console.log(\"  \");\n\n    // WebSocket  \n    if (currentWebSocketRef.current) {\n      currentWebSocketRef.current.close();\n      currentWebSocketRef.current = null;\n    }\n\n    //     \n    if (currentExecutionIdRef.current) {\n      //   API      \n      currentExecutionIdRef.current = null;\n    }\n\n    //    \n    const currentStreamingId = streamingMessageIdRef.current;\n    if (currentStreamingId) {\n      setMessages((prev) => {\n        const updatedMessages = [...prev];\n        const streamingMsgIndex = updatedMessages.findIndex(\n          (msg) => msg.id === currentStreamingId\n        );\n\n        if (streamingMsgIndex !== -1) {\n          updatedMessages[streamingMsgIndex] = {\n            ...updatedMessages[streamingMsgIndex],\n            content:\n              updatedMessages[streamingMsgIndex].content +\n              \"\\n\\n[ ]\",\n            isLoading: false,\n            isStreaming: false,\n            timestamp: new Date().toISOString(),\n          };\n        }\n\n        return updatedMessages;\n      });\n\n      streamingMessageIdRef.current = null;\n    }\n\n    //    \n    setCanSendMessage(true);\n\n    // orchestration  \n    resetOrchestration();\n\n    toast.success(\" \");\n  }, [resetOrchestration]);\n\n  /**\n   *    \n   */\n  const adjustInputHeight = useCallback((value) => {\n    if (!value.trim()) {\n      setInputHeight(24); //  \n      return;\n    }\n\n    //    ()\n    const lines = value.split(\"\\n\").length;\n    const charBasedLines = Math.ceil(value.length / 80); // 80 1 \n    const estimatedLines = Math.max(lines, charBasedLines);\n\n    //   (lineHeight: 1.4, fontSize: 16px)\n    let calculatedHeight;\n    if (estimatedLines <= 3) {\n      calculatedHeight = 24 + (estimatedLines - 1) * 22; //  +  \n    } else if (estimatedLines <= 10) {\n      calculatedHeight = 150 + (estimatedLines - 6) * 15; //  \n    } else {\n      calculatedHeight = Math.min(400, 150 + (estimatedLines - 6) * 12); //  400px\n    }\n\n    setInputHeight(Math.max(24, calculatedHeight));\n  }, []);\n\n  /**\n   *   \n   */\n  const handleInputChange = useCallback(\n    (value) => {\n      setInputValue(value);\n      adjustInputHeight(value);\n    },\n    [adjustInputHeight]\n  );\n\n  /**\n   *  \n   */\n  const handleSendMessage = useCallback(async () => {\n    console.log(\"  :\", {\n      inputValue: inputValue.trim(),\n      isGenerating,\n      canSendMessage,\n    });\n\n    if (!inputValue.trim() || isGenerating) {\n      console.log(\" :  \");\n      return;\n    }\n\n    //  \n    console.log(\" \");\n    setCanSendMessage(false);\n\n    const userMessage = {\n      id: \"user-\" + Date.now(),\n      type: \"user\",\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString(),\n    };\n\n    //   ID \n    const streamMsgId = \"streaming-\" + Date.now();\n    streamingMessageIdRef.current = streamMsgId;\n\n    console.log(\"   ID :\", streamMsgId);\n\n    //     \n    const streamingMessage = {\n      id: streamMsgId,\n      type: \"assistant\",\n      content: \"\",\n      timestamp: new Date().toISOString(),\n      isLoading: true,\n      isStreaming: true,\n    };\n\n    setMessages((prev) => [...prev, userMessage, streamingMessage]);\n    setInputValue(\"\");\n    setInputHeight(24); //   \n\n    //   +       \n    const allMessages = [...messages, userMessage];\n    const chatHistory = allMessages\n      .filter((msg) => !msg.isLoading && !msg.isError && !msg.isStreaming)\n      .map((msg) => ({\n        role: msg.type === \"user\" ? \"user\" : \"assistant\",\n        content: msg.content,\n      }));\n\n    //     ( 50    )\n    const maxHistoryLength = 50;\n    const trimmedChatHistory = chatHistory.slice(-maxHistoryLength);\n\n    console.log(\"  :\", {\n      totalMessages: allMessages.length,\n      fullHistoryLength: chatHistory.length,\n      trimmedHistoryLength: trimmedChatHistory.length,\n      maxHistoryLength: maxHistoryLength,\n      recentHistory: trimmedChatHistory.slice(-6), //  6  \n    });\n\n    try {\n      //     -       \n      const safePromptCards = Array.isArray(promptCards) ? promptCards : [];\n      const activePromptCards = safePromptCards\n        .filter((card) => card.isActive !== false && card.enabled !== false)\n        .map((card) => ({\n          promptId: card.promptId || card.prompt_id,\n          title: card.title || \"Untitled\",\n          prompt_text: card.prompt_text || card.content || \"\",\n          tags: card.tags || [],\n          isActive: card.isActive !== false,\n          stepOrder: card.stepOrder || 0,\n        }))\n        .filter((card) => card.prompt_text.trim()) //    \n        .sort((a, b) => (a.stepOrder || 0) - (b.stepOrder || 0)); // stepOrder \n\n      console.log(\"   :\", {\n        messageContent: userMessage.content,\n        chatHistoryLength: trimmedChatHistory.length,\n        promptCardsCount: activePromptCards.length,\n        chatHistory: trimmedChatHistory,\n        promptCards: activePromptCards.map((card) => ({\n          id: card.promptId,\n          title: card.title,\n          contentLength: card.prompt_text.length,\n          stepOrder: card.stepOrder,\n          hasContent: !!card.prompt_text.trim(),\n        })),\n      });\n\n      // WebSocket      \n      if (wsConnected) {\n        console.log(\"WebSocket    \");\n        console.log(\" [DEBUG]    :\", {\n          projectId,\n          userInput: userMessage.content,\n          conversationId: conversationId,\n          userSub: user?.id,\n          historyLength: trimmedChatHistory.length,\n          promptCardsLength: activePromptCards.length,\n          conversationIdType: typeof conversationId,\n          conversationIdValue: conversationId,\n          isConversationIdNull: conversationId === null,\n          isConversationIdUndefined: conversationId === undefined,\n        });\n\n        const success = wsStartStreaming(\n          userMessage.content,\n          trimmedChatHistory,\n          activePromptCards,\n          selectedModel,\n          conversationId, // Add conversationId\n          user?.id // Add userSub from AuthContext\n        );\n\n        if (success) {\n          // WebSocket  ,   \n          return;\n        } else {\n          console.log(\"WebSocket  , SSE   \");\n        }\n      } else {\n        console.log(\"WebSocket , SSE  \");\n      }\n\n      //  -  \n      console.log(\"-   \");\n\n      // 1.    crew  \n      if (activePromptCards.length > 0) {\n        try {\n          console.log(\"      \");\n          await crewAPI.createCrewInstance(projectId, activePromptCards);\n          console.log(\"   \");\n        } catch (instanceError) {\n          console.log(\"   :\", instanceError.message);\n\n          // 401     \n          if (instanceError.response?.status === 401) {\n            const { shouldRedirect } = await handleAPIError(instanceError);\n            if (shouldRedirect) {\n              return;\n            }\n          }\n\n          //       (   )\n          console.log(\"     \");\n        }\n      }\n\n      // 2. -  \n      const multiAgentResult = await crewAPI.executeMultiAgent(\n        projectId,\n        userMessage.content,\n        (progress) => {\n          //   ()\n          console.log(\"- :\", progress);\n        }\n      );\n\n      console.log(\"-  :\", multiAgentResult);\n\n      // 3.  UI  \n      const assistantMessage = processMultiAgentResponse(multiAgentResult);\n\n      // 4.     \n      setMessages((prev) => {\n        const updatedMessages = [...prev];\n        const streamingMsgIndex = updatedMessages.findIndex(\n          (msg) => msg.id === streamingMessageIdRef.current\n        );\n\n        if (streamingMsgIndex !== -1) {\n          updatedMessages[streamingMsgIndex] = assistantMessage;\n        } else {\n          updatedMessages.push(assistantMessage);\n        }\n\n        return updatedMessages;\n      });\n\n      streamingMessageIdRef.current = null;\n      setCanSendMessage(true);\n\n      //  \n      toast.success(\n        `${\n          Object.keys(multiAgentResult.agentResults || {}).length\n        }   !`\n      );\n    } catch (error) {\n      console.error(\"  :\", error);\n\n      // API   \n      const { userMessage: errorUserMessage, shouldRedirect } =\n        await handleAPIError(error);\n\n      //     \n      if (shouldRedirect) {\n        return;\n      }\n\n      const errorMessage = {\n        id: \"error-\" + Date.now(),\n        type: \"assistant\",\n        content: errorUserMessage,\n        timestamp: new Date().toISOString(),\n        isError: true,\n        errorDetails: {\n          message: error.message,\n          status: error.response?.status,\n          code: error.code,\n        },\n      };\n\n      setMessages((prev) => {\n        //    \n        const currentStreamingId = streamingMessageIdRef.current;\n        const filteredMessages = prev.filter(\n          (msg) => msg.id !== currentStreamingId\n        );\n        return [...filteredMessages, errorMessage];\n      });\n\n      streamingMessageIdRef.current = null;\n\n      //     \n      setCanSendMessage(true);\n    }\n\n    //        ()\n    setCanSendMessage(true);\n  }, [\n    inputValue,\n    isGenerating,\n    executeOrchestration,\n    handleStreamingResponse,\n    handleStreamingComplete,\n    messages,\n  ]);\n\n  /**\n   * Enter  \n   */\n  const handleKeyPress = useCallback(\n    (e) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        handleSendMessage();\n      }\n    },\n    [handleSendMessage]\n  );\n\n  /**\n   *  \n   */\n  const handleCopyMessage = useCallback(async (content, messageId) => {\n    const success = await copyToClipboard(content);\n    if (success) {\n      setCopiedMessage(messageId);\n      setTimeout(() => setCopiedMessage(null), 2000);\n    }\n  }, []);\n\n  /**\n   *   \n   */\n  const handleCopyTitle = useCallback(async (title, messageId, index) => {\n    const success = await copyToClipboard(title, \"!\");\n    if (success) {\n      setCopiedMessage(`${messageId}_title_${index}`);\n      setTimeout(() => setCopiedMessage(null), 2000);\n    }\n  }, []);\n\n  /**\n   *  \n   */\n  const resetChat = useCallback(() => {\n    setMessages([]);\n    setInputValue(\"\");\n    setCopiedMessage(null);\n    setCanSendMessage(true);\n    streamingMessageIdRef.current = null;\n    currentWebSocketRef.current = null;\n    currentExecutionIdRef.current = null;\n    resetOrchestration();\n  }, [resetOrchestration]);\n\n  return {\n    messages,\n    inputValue,\n    setInputValue,\n    handleInputChange, //   \n    copiedMessage,\n    isGenerating,\n    isStreaming,\n    canSendMessage,\n    streamingMessageId: streamingMessageIdRef.current,\n    messagesEndRef,\n    inputRef,\n    inputHeight, //  \n    handleSendMessage,\n    handleStopGeneration,\n    handleKeyPress,\n    handleCopyMessage,\n    handleCopyTitle,\n    resetChat,\n    scrollToBottom,\n    // WebSocket  \n    wsConnected,\n    wsConnecting,\n    wsError,\n    //   \n    scrollContainerRef,\n    handleScroll,\n    isUserScrolling,\n    //    \n    selectedModel,\n    setSelectedModel,\n  };\n};\n","import { useState, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { generateAPI } from \"../services/api\";\n\n/**\n *         \n * @param {string} projectId -  ID\n * @returns {Object} -     \n */\nexport const useOrchestration = (projectId) => {\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentExecution, setCurrentExecution] = useState(null);\n  const [executionStatus, setExecutionStatus] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  /**\n   *   \n   * @param {string} userInput -  \n   * @param {Object} options -   (: chat_history, useStreaming)\n   * @returns {Promise<Object>} -  \n   */\n  const executeOrchestration = useCallback(\n    async (userInput, options = {}) => {\n      if (!userInput.trim()) {\n        toast.error(\" .\");\n        return null;\n      }\n\n      try {\n        setIsExecuting(true);\n        setExecutionStatus(\"STARTING\");\n\n        // chat_history, prompt_cards, userInput, modelId  data  \n        const data = {\n          userInput: userInput,\n          chat_history: options.chat_history || [],\n          prompt_cards: options.prompt_cards || [],\n          modelId: options.modelId || null,\n        };\n\n        console.log(\"    :\", {\n          projectId,\n          inputLength: userInput.length,\n          historyLength: data.chat_history.length,\n          promptCardsCount: data.prompt_cards.length,\n          useStreaming: options.useStreaming === true,\n          modelId: data.modelId,\n          timestamp: new Date().toISOString(),\n        });\n\n        //      -   \n        if (options.useStreaming === true) {\n          setIsStreaming(true);\n\n          //    \n          const onChunk = options.onChunk || (() => {});\n          const onError = (error) => {\n            console.error(\"   :\", error);\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"FAILED\");\n\n            //  :     \n            if (\n              error.message?.includes(\"Gateway Timeout\") ||\n              error.message?.includes(\"504\") ||\n              error.code === \"ECONNABORTED\"\n            ) {\n              toast.error(\n                \"   .       .\"\n              );\n            } else if (\n              error.message?.includes(\"CORS\") ||\n              error.message?.includes(\"Network Error\")\n            ) {\n              toast.error(\n                \"   .    .\"\n              );\n            } else {\n              toast.error(\n                \"   .    .\"\n              );\n            }\n\n            if (options.onError) options.onError(error);\n          };\n\n          const onComplete = (response) => {\n            console.log(\"  :\", {\n              resultLength: response.result?.length || 0,\n              timestamp: new Date().toISOString(),\n            });\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"COMPLETED\");\n            if (options.onComplete) options.onComplete(response);\n          };\n\n          try {\n            //  :  API  (  )\n            return await generateAPI.generateTitleStream(\n              projectId,\n              data,\n              onChunk,\n              onError,\n              onComplete\n            );\n          } catch (streamError) {\n            console.error(\"   :\", streamError);\n\n            //        \n            //   \n            setIsStreaming(false);\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            //   \n            toast.error(\n              \"   .    .\"\n            );\n            throw streamError;\n          }\n        }\n\n        //   API  ( )\n        console.log(\"  API  ...\");\n        const response = await generateAPI.generateTitle(projectId, data);\n\n        console.log(\"   :\", {\n          mode: response.mode,\n          message: response.message,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setExecutionStatus(\"COMPLETED\");\n\n        return response;\n      } catch (error) {\n        console.error(\"   :\", {\n          error: error.message,\n          code: error.code,\n          status: error.response?.status,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setIsStreaming(false);\n        setExecutionStatus(\"FAILED\");\n\n        //  :   \n        if (error.response?.status === 504) {\n          toast.error(\n            \"   .      .\"\n          );\n        } else if (\n          error.message?.includes(\"CORS\") ||\n          error.code === \"ERR_NETWORK\"\n        ) {\n          toast.error(\n            \"   .    .\"\n          );\n        } else if (\n          error.response?.status === 400 &&\n          error.response?.data?.setup_required\n        ) {\n          toast.error(\"   !\");\n        } else if (error.code === \"ECONNABORTED\") {\n          toast.error(\n            \"   .      .\"\n          );\n        } else if (error.response?.status === 500) {\n          toast.error(\n            \"   .    .\"\n          );\n        } else if (error.response?.status === 403) {\n          toast.error(\" .   .\");\n        } else if (error.response?.status === 429) {\n          toast.error(\"  .    .\");\n        } else {\n          toast.error(\n            \"   .     .\"\n          );\n        }\n\n        throw error;\n      }\n    },\n    [projectId]\n  );\n\n  /**\n   *    (Step Functions  )\n   * @param {string} executionArn -  ARN\n   * @param {Function} onComplete -   \n   * @param {Function} onError -   \n   */\n  const pollOrchestrationResult = useCallback(\n    async (executionArn, onComplete, onError) => {\n      //     \n      if (isStreaming) {\n        return;\n      }\n\n      const poll = async () => {\n        try {\n          const result = await generateAPI.getExecutionStatus(executionArn);\n\n          setExecutionStatus(result.status);\n\n          if (result.status === \"SUCCEEDED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"COMPLETED\");\n\n            if (onComplete) {\n              onComplete(result);\n            }\n          } else if (result.status === \"FAILED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            if (onError) {\n              onError(new Error(\" \"));\n            }\n          } else if (result.status === \"RUNNING\") {\n            // 3   \n            setTimeout(poll, 3000);\n          }\n        } catch (error) {\n          console.error(\"   :\", error);\n          setIsExecuting(false);\n          setExecutionStatus(\"FAILED\");\n\n          if (onError) {\n            onError(error);\n          }\n        }\n      };\n\n      poll();\n    },\n    [projectId, isStreaming]\n  );\n\n  /**\n   *   \n   */\n  const resetOrchestration = useCallback(() => {\n    setIsExecuting(false);\n    setIsStreaming(false);\n    setCurrentExecution(null);\n    setExecutionStatus(null);\n  }, []);\n\n  return {\n    isExecuting,\n    isStreaming,\n    currentExecution,\n    executionStatus,\n    executeOrchestration,\n    pollOrchestrationResult,\n    resetOrchestration,\n  };\n};\n","import { useState, useEffect, useRef, useCallback } from \"react\";\n\n/**\n * WebSocket     \n */\nexport const useWebSocket = (projectId) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState(null);\n  const wsRef = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n  const reconnectAttempts = useRef(0);\n  const maxReconnectAttempts = 5;\n\n  // WebSocket URL (   URL )\n  const getWebSocketUrl = useCallback(async () => {\n    const wsUrl =\n      process.env.REACT_APP_WS_URL ||\n      \"wss://your-websocket-api.execute-api.us-east-1.amazonaws.com/prod\";\n    \n    // URL    \n    if (!wsUrl.startsWith(\"wss://\") && !wsUrl.startsWith(\"ws://\")) {\n      console.error(\" WebSocket URL :\", wsUrl);\n      return null;\n    }\n    \n    //   \n    let normalizedUrl = wsUrl.replace(/\\/$/, \"\");\n    \n    //    \n    if (process.env.REACT_APP_SKIP_AUTH === 'true') {\n      console.log(\"  : WebSocket  \");\n    } else {\n      //     \n      try {\n        const { fetchAuthSession } = await import('aws-amplify/auth');\n        const session = await fetchAuthSession();\n        const token = session?.tokens?.idToken?.toString();\n        \n        if (token) {\n          // URL    \n          normalizedUrl += `?token=${encodeURIComponent(token)}`;\n          console.log(\" WebSocket URL   \");\n        } else {\n          console.log(\"    -  WebSocket  \");\n        }\n      } catch (authError) {\n        console.log(\"    :\", authError.message);\n      }\n    }\n    \n    console.log(\"WebSocket URL :\", normalizedUrl.replace(/token=[^&]+/, 'token=***'));\n    console.log(\" REACT_APP_WS_URL:\", process.env.REACT_APP_WS_URL);\n    \n    return normalizedUrl;\n  }, []);\n\n  // WebSocket \n  const connect = useCallback(async () => {\n    //        \n    if (wsRef.current?.readyState === WebSocket.OPEN || \n        wsRef.current?.readyState === WebSocket.CONNECTING) {\n      console.log(\"  WebSocket  (readyState:\", wsRef.current.readyState, \")\");\n      return;\n    }\n\n    //    \n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n    }\n\n    setIsConnecting(true);\n    setError(null);\n\n    try {\n      const wsUrl = await getWebSocketUrl();\n      \n      if (!wsUrl) {\n        setError(\"  WebSocket URL\");\n        setIsConnecting(false);\n        return;\n      }\n\n      console.log(\"WebSocket  :\", wsUrl);\n      console.log(\" WebSocket :\", !!window.WebSocket);\n\n      //    \n      window.wsConnectStart = Date.now();\n\n      wsRef.current = new WebSocket(wsUrl);\n\n      //   \n      const connectionTimeout = setTimeout(() => {\n        if (wsRef.current?.readyState === WebSocket.CONNECTING) {\n          console.error(\"WebSocket   \");\n          wsRef.current.close();\n          setError(\"  \");\n          setIsConnecting(false);\n        }\n      }, 10000); // 10 \n\n      wsRef.current.onopen = (event) => {\n        clearTimeout(connectionTimeout);\n        console.log(\" WebSocket  !\");\n        console.log(\"- Event:\", event);\n        console.log(\"- URL:\", wsRef.current?.url);\n        console.log(\"- Protocol:\", wsRef.current?.protocol);\n        console.log(\"- Extensions:\", wsRef.current?.extensions);\n        setIsConnected(true);\n        setIsConnecting(false);\n        setError(null);\n        reconnectAttempts.current = 0;\n      };\n\n      wsRef.current.onclose = (event) => {\n        clearTimeout(connectionTimeout);\n        const connectionDuration = Date.now() - (window.wsConnectStart || 0);\n        \n        console.log(\" WebSocket  :\");\n        console.log(\"- Code:\", event.code);\n        console.log(\"- Reason:\", event.reason || \"(no reason provided)\");\n        console.log(\"- WasClean:\", event.wasClean);\n        console.log(\"- Connection duration:\", connectionDuration + \"ms\");\n        \n        setIsConnected(false);\n        setIsConnecting(false);\n\n        //    (500ms ) -  \n        if (connectionDuration < 500) {\n          console.error(\" WebSocket   -   \");\n          \n          //       \n          let errorMessage = \"  .\";\n          switch(event.code) {\n            case 1006:\n              errorMessage = \"   (  )\";\n              break;\n            case 1002:\n              errorMessage = \" \";\n              break;\n            case 1003:\n              errorMessage = \"   \";\n              break;\n            case 1011:\n              errorMessage = \"  \";\n              break;\n            case 1001:\n              errorMessage = \" \";\n              break;\n            case 1012:\n              errorMessage = \"  \";\n              break;\n            case 1013:\n              errorMessage = \"  \";\n              break;\n            case 1014:\n              errorMessage = \" \";\n              break;\n            case 1015:\n              errorMessage = \"TLS  \";\n              break;\n          }\n          \n          setError(errorMessage);\n          return;\n        }\n\n        //   (   )\n        if (\n          event.code !== 1000 &&\n          reconnectAttempts.current < maxReconnectAttempts\n        ) {\n          const delay = Math.min(\n            1000 * Math.pow(2, reconnectAttempts.current),\n            30000\n          );\n          console.log(\n            ` ${delay}ms    (${\n              reconnectAttempts.current + 1\n            }/${maxReconnectAttempts})`\n          );\n\n          reconnectTimeoutRef.current = setTimeout(() => {\n            reconnectAttempts.current++;\n            connect();\n          }, delay);\n        } else if (reconnectAttempts.current >= maxReconnectAttempts) {\n          setError(\"    .\");\n        }\n      };\n\n      wsRef.current.onerror = (error) => {\n        clearTimeout(connectionTimeout);\n        console.error(\" WebSocket :\", error);\n        console.log(\"- ReadyState:\", wsRef.current?.readyState);\n        console.log(\"- URL:\", wsRef.current?.url);\n        setError(\"WebSocket   \");\n        setIsConnecting(false);\n      };\n\n    } catch (err) {\n      console.error(\" WebSocket  :\", err);\n      setError(\"WebSocket  : \" + err.message);\n      setIsConnecting(false);\n    }\n  }, [getWebSocketUrl]);\n\n  // WebSocket  \n  const disconnect = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n\n    if (wsRef.current) {\n      wsRef.current.close(1000, \"Manual disconnect\");\n      wsRef.current = null;\n    }\n\n    setIsConnected(false);\n    setIsConnecting(false);\n    reconnectAttempts.current = 0;\n  }, []);\n\n  //  \n  const sendMessage = useCallback((message) => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify(message));\n      return true;\n    } else {\n      console.error(\"WebSocket  \");\n      setError(\"WebSocket  \");\n      return false;\n    }\n  }, []);\n\n  //  \n  const startStreaming = useCallback(\n    (userInput, chatHistory = [], promptCards = [], modelId = null, conversationId = null, userSub = null) => {\n      if (!isConnected) {\n        setError(\"WebSocket  \");\n        return false;\n      }\n\n      const message = {\n        action: \"stream\",\n        projectId,\n        userInput,\n        chat_history: chatHistory,\n        prompt_cards: promptCards,\n        modelId: modelId,\n        conversationId: conversationId,\n        userSub: userSub,\n      };\n\n      console.log('WebSocket  :', {\n        action: message.action,\n        projectId: message.projectId,\n        inputLength: userInput.length,\n        historyLength: chatHistory.length,\n        promptCardsCount: promptCards.length,\n        conversationId: message.conversationId,\n        userSub: message.userSub\n      });\n\n      return sendMessage(message);\n    },\n    [isConnected, projectId, sendMessage]\n  );\n\n  //   \n  const addMessageListener = useCallback((listener) => {\n    if (wsRef.current) {\n      wsRef.current.addEventListener(\"message\", listener);\n    }\n  }, []);\n\n  //   \n  const removeMessageListener = useCallback((listener) => {\n    if (wsRef.current) {\n      wsRef.current.removeEventListener(\"message\", listener);\n    }\n  }, []);\n\n  //    ,   \n  useEffect(() => {\n    //     React strict mode  \n    const timer = setTimeout(() => {\n      connect();\n    }, 100);\n    \n    return () => {\n      clearTimeout(timer);\n      disconnect();\n    };\n  }, []); //     \n\n  // projectId    (    )\n  const prevProjectIdRef = useRef(projectId);\n  useEffect(() => {\n    if (prevProjectIdRef.current !== projectId && isConnected && projectId) {\n      console.log('ProjectId ,  :', prevProjectIdRef.current, '->', projectId);\n      disconnect();\n      setTimeout(connect, 200);\n    }\n    prevProjectIdRef.current = projectId;\n  }, [projectId, isConnected]); // connect, disconnect  \n\n  return {\n    isConnected,\n    isConnecting,\n    error,\n    connect,\n    disconnect,\n    sendMessage,\n    startStreaming,\n    addMessageListener,\n    removeMessageListener,\n  };\n};\n","import React, { useState } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport {\n  ExclamationTriangleIcon,\n} from \"@heroicons/react/24/outline\";\n\n//    \nconst formatTimestamp = (timestamp) => {\n  if (!timestamp) return \"\";\n\n  try {\n    //  Date  \n    if (timestamp instanceof Date) {\n      return timestamp.toLocaleTimeString('ko-KR', { \n        hour: '2-digit', \n        minute: '2-digit',\n        hour12: false \n      });\n    }\n\n    //   Date  \n    if (typeof timestamp === \"string\") {\n      const date = new Date(timestamp);\n      return isNaN(date.getTime()) ? \"\" : date.toLocaleTimeString('ko-KR', { \n        hour: '2-digit', \n        minute: '2-digit',\n        hour12: false \n      });\n    }\n\n    //   ()\n    if (typeof timestamp === \"number\") {\n      return new Date(timestamp).toLocaleTimeString('ko-KR', { \n        hour: '2-digit', \n        minute: '2-digit',\n        hour12: false \n      });\n    }\n\n    return \"\";\n  } catch (error) {\n    console.warn(\"  :\", error);\n    return \"\";\n  }\n};\n\nconst SimpleChatMessage = ({ message, onCopyMessage, onCopyTitle, copiedMessage }) => {\n  //      !\n  const isUser = message.role === \"user\" || message.type === \"user\";\n  const isError = message.role === \"error\";\n  const isLoading = message.isLoading || false;\n  \n  //   \n  const [likeClicked, setLikeClicked] = useState(false);\n  const [dislikeClicked, setDislikeClicked] = useState(false);\n  const [copyClicked, setCopyClicked] = useState(false);\n  \n  //  \n  const handleCopyClick = async () => {\n    try {\n      await navigator.clipboard.writeText(message.content);\n      setCopyClicked(true);\n      setTimeout(() => setCopyClicked(false), 1000);\n      //     \n    } catch (err) {\n      console.error(' :', err);\n    }\n  };\n  \n  //  \n  const handleLikeClick = () => {\n    setLikeClicked(true);\n    setDislikeClicked(false); //   \n    setTimeout(() => setLikeClicked(false), 2000);\n  };\n  \n  //  \n  const handleDislikeClick = () => {\n    setDislikeClicked(true);\n    setLikeClicked(false); //   \n    setTimeout(() => setDislikeClicked(false), 2000);\n  };\n  \n\n  return (\n    <div className={`flex ${isUser ? \"justify-end\" : \"justify-start\"} mb-3`}>\n      {isUser ? (\n        //   -  \n        <div className=\"max-w-[70%]\">\n          <div \n            className=\"bg-[#5E89FF] text-white rounded-2xl px-4 py-2 shadow-md\"\n          >\n            <div className=\"text-[15px] font-normal leading-[1.5] whitespace-pre-wrap break-words\">\n              {message.content}\n            </div>\n            {/*  -    */}\n            {message.timestamp && (\n              <div className=\"text-[12px] text-white/70 mt-1 text-right\">\n                {formatTimestamp(message.timestamp)}\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        // AI  -   \n        <div className=\"w-full max-w-[75%]\">\n          <div \n            className=\"bg-transparent dark:bg-transparent\" \n            aria-live=\"polite\"\n          >\n            {isError ? (\n              <div className=\"text-red-600 dark:text-red-400\">\n                <div className=\"flex items-center mb-2\">\n                  <ExclamationTriangleIcon className=\"h-4 w-4 mr-2\" />\n                  <span className=\"text-[14px] font-semibold\"> </span>\n                </div>\n                <div className=\"text-[15px] font-normal leading-[1.5]\">{message.content}</div>\n              </div>\n            ) : isLoading ? (\n              //    -  \n              <div className=\"flex items-start gap-3\">\n                {/* AI  */}\n                <div className=\"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center shadow-sm\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.847a4.5 4.5 0 003.09 3.09L15.75 12l-2.847.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z\" />\n                  </svg>\n                </div>\n                \n                {/*   */}\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-1 mb-2\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n                  </div>\n                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">AI   ...</span>\n                </div>\n              </div>\n            ) : (\n              //  AI  -    \n              <div className=\"flex items-start gap-3\">\n                {/* AI  */}\n                <div className=\"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center shadow-sm mt-1\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.847a4.5 4.5 0 003.09 3.09L15.75 12l-2.847.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z\" />\n                  </svg>\n                </div>\n                \n                {/*   */}\n                <div className=\"flex-1 text-[#202124] dark:text-[#E5E7EB] prose prose-sm max-w-none\">\n                  <div className=\"text-[15px] font-normal leading-[1.6] whitespace-pre-wrap [&>p]:mb-3 [&>ul]:mb-3 [&>ol]:mb-3 [&>h1]:text-[18px] [&>h1]:font-semibold [&>h1]:mb-3 [&>h2]:text-[16px] [&>h2]:font-semibold [&>h2]:mb-2 [&>h3]:text-[15px] [&>h3]:font-medium [&>h3]:mb-2\">\n                    <ReactMarkdown>{message.content}</ReactMarkdown>\n                  </div>\n                </div>\n              </div>\n            )}\n            {/*  -     */}\n            {message.timestamp && (\n              <div className=\"text-[12px] text-gray-500 dark:text-gray-400 mt-1 ml-11\">\n                {formatTimestamp(message.timestamp)}\n              </div>\n            )}\n          </div>\n          \n          {/* AI     - GPT  */}\n          {!isError && !isLoading && (\n            <div className=\"flex items-center gap-1 mt-2 ml-11\">\n              {/*   */}\n              <button\n                onClick={handleCopyClick}\n                className={`p-1.5 rounded transition-all duration-200 transform ${\n                  copyClicked\n                    ? \"text-green-500 bg-green-100 dark:bg-green-900/30 scale-110\"\n                    : \"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n                }`}\n                title={copyClicked ? \"!\" : \"\"}\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  viewBox=\"0 0 24 24\" \n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  {copyClicked ? (\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n                  ) : (\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                  )}\n                </svg>\n              </button>\n              \n              {/*   */}\n              <button\n                onClick={handleLikeClick}\n                className={`p-1.5 rounded transition-all duration-300 transform ${\n                  likeClicked\n                    ? \"text-blue-500 bg-blue-100 dark:bg-blue-900/30 scale-110 animate-pulse\"\n                    : \"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n                }`}\n                title={likeClicked ? \"!\" : \"\"}\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill={likeClicked ? \"currentColor\" : \"none\"}\n                  viewBox=\"0 0 24 24\" \n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5\" />\n                </svg>\n              </button>\n              \n              {/*   */}\n              <button\n                onClick={handleDislikeClick}\n                className={`p-1.5 rounded transition-all duration-300 transform ${\n                  dislikeClicked\n                    ? \"text-red-500 bg-red-100 dark:bg-red-900/30 scale-110 border-2 border-red-300 animate-pulse\"\n                    : \"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n                }`}\n                title={dislikeClicked ? \"!\" : \"\"}\n              >\n                <svg \n                  className=\"w-4 h-4 rotate-180\" \n                  fill={dislikeClicked ? \"currentColor\" : \"none\"}\n                  viewBox=\"0 0 24 24\" \n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.60L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SimpleChatMessage;","import React, { useState, useCallback } from \"react\";\nimport { ChatBubbleLeftRightIcon, SparklesIcon, PaperAirplaneIcon, StopIcon } from \"@heroicons/react/24/outline\";\nimport ConversationDrawer from \"./ConversationDrawer\";\nimport ModelSelector from \"../ModelSelector\";\nimport { useChat } from \"../../hooks/useChat\";\nimport { useMessages } from \"../../hooks/useMessages\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport SimpleChatMessage from \"../SimpleChatMessage\";\n\nconst ChatWindow = ({ projectId, projectName, promptCards = [] }) => {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  // Auth context for user info\n  const { user } = useAuth();\n\n  // Conversation context\n  const { currentConversationId, addMessage } = useConversationContext();\n\n  // Messages hook for current conversation\n  const {\n    messages: historicalMessages,\n    loading: messagesLoading,\n  } = useMessages(currentConversationId);\n\n  // Chat hook for sending messages\n  const {\n    messages: chatMessages,\n    inputValue,\n    handleInputChange,\n    copiedMessage,\n    isGenerating,\n    inputHeight,\n    handleSendMessage: originalHandleSendMessage,\n    handleStopGeneration,\n    handleKeyPress,\n    handleCopyMessage,\n    handleCopyTitle,\n    wsConnected,\n    wsConnecting,\n    selectedModel,\n    setSelectedModel,\n  } = useChat(projectId, projectName, promptCards, currentConversationId);\n\n  //    (  +   )\n  const allMessages = [...historicalMessages, ...chatMessages];\n\n  //    (conversation  )\n  const handleSendMessage = useCallback(async () => {\n    if (!inputValue.trim() || isGenerating) return;\n\n    //   ID     \n    const messageData = {\n      userInput: inputValue,\n      projectId,\n      conversationId: currentConversationId,\n      userSub: user?.id || \"anonymous\",\n      chat_history: allMessages.map((msg) => ({\n        role: msg.role,\n        content: msg.content,\n      })),\n      prompt_cards: promptCards,\n    };\n\n    //    UI \n    const userMessage = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: inputValue,\n      timestamp: new Date().toISOString(),\n    };\n    addMessage(userMessage);\n\n    //    ( )\n    await originalHandleSendMessage(messageData);\n  }, [\n    inputValue,\n    isGenerating,\n    currentConversationId,\n    allMessages,\n    promptCards,\n    addMessage,\n    originalHandleSendMessage,\n    projectId,\n    user?.id,\n  ]);\n\n  return (\n    <div className=\"flex h-full overflow-hidden\">\n      {/*   */}\n      <ConversationDrawer onCollapsedChange={setSidebarCollapsed} />\n\n      {/*    */}\n      <div className={`flex-1 flex flex-col bg-gray-50 dark:bg-dark-primary transition-all duration-500 ease-out relative ${\n        sidebarCollapsed ? \"md:ml-14\" : \"md:ml-64\"\n      }`}>\n        {/*   */}\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-6 py-4 min-h-0 bg-gray-50 dark:bg-dark-primary transition-all duration-300 pt-4 pb-40\">\n          <div className=\"max-w-4xl mx-auto space-y-6\">\n            {allMessages.length === 0 && !messagesLoading ? (\n              //   -   \n              <div className=\"flex flex-col items-center justify-center min-h-[calc(100vh-280px)]\">\n                <div className=\"bg-white dark:bg-dark-secondary rounded-2xl shadow-md p-8 max-w-3xl w-full mx-auto transition-colors duration-300\">\n                  <div className=\"flex justify-center mb-6\">\n                    <div className=\"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full\">\n                      <ChatBubbleLeftRightIcon className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                  </div>\n                  <h2 className=\"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4\">\n                    AI  \n                  </h2>\n                  <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\n                      AI    .\n                  </p>\n\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                      <div className=\"mr-3 mt-1\">\n                        <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                          <span className=\"font-medium\"> :</span>{\" \"}\n                                \n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                      <div className=\"mr-3 mt-1\">\n                        <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                          <span className=\"font-medium\"> :</span> \n                                \n                          \n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              //  \n              <div className=\"space-y-6 pt-4\">\n                {allMessages.map((message) => (\n                  <SimpleChatMessage\n                    key={message.id}\n                    message={message}\n                    onCopyMessage={handleCopyMessage}\n                    onCopyTitle={handleCopyTitle}\n                    copiedMessage={copiedMessage}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/*     - DeepSeek  */}\n        <div className={`absolute bottom-0 left-0 right-0 bg-gray-50 dark:bg-dark-primary border-t border-gray-200 dark:border-gray-700 transition-all duration-500`}>\n          <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\n            {/*     */}\n            <div className=\"w-full rounded-2xl bg-white dark:bg-[#2E333D] border border-gray-200 dark:border-transparent shadow-sm dark:shadow-none transition-all duration-200\">\n              {/*    */}\n              <div className=\"flex items-center gap-3 px-5 py-4\">\n                {/*    */}\n                <textarea\n                  value={inputValue}\n                  onChange={(e) => handleInputChange(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder={\n                    isGenerating\n                      ? \" ...\"\n                      : \"  ...\"\n                  }\n                  className=\"flex-1 resize-none bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none appearance-none\"\n                  rows={1}\n                  style={{\n                    height: `${Math.max(inputHeight || 24, 24)}px`,\n                    minHeight: \"24px\",\n                    maxHeight: \"200px\",\n                    lineHeight: \"1.5\",\n                    overflowY: inputHeight > 120 ? \"auto\" : \"hidden\"\n                  }}\n                  disabled={isGenerating}\n                />\n\n                {/* /  */}\n                {isGenerating ? (\n                  <button\n                    onClick={handleStopGeneration}\n                    className=\"shrink-0 rounded-full p-2.5 bg-red-500 hover:bg-red-600 text-white transition-all duration-200\"\n                  >\n                    <StopIcon className=\"w-4 h-4\" />\n                  </button>\n                ) : (\n                  <button\n                    onClick={handleSendMessage}\n                    disabled={!inputValue.trim()}\n                    className={`shrink-0 rounded-full p-2.5 transition-all duration-200 ${\n                      inputValue.trim()\n                        ? \"bg-[#5E89FF] hover:bg-[#4A7BFF] text-white\"\n                        : \"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed\"\n                    }`}\n                  >\n                    <PaperAirplaneIcon className=\"w-4 h-4\" />\n                  </button>\n                )}\n              </div>\n\n              {/*    -    */}\n              <div className=\"flex items-center justify-between px-5 pb-3 pt-1\">\n                <div className=\"flex items-center gap-3\">\n                  {/*   */}\n                  <div className=\"scale-90 origin-left\">\n                    <ModelSelector\n                      selectedModel={selectedModel}\n                      onModelChange={setSelectedModel}\n                    />\n                  </div>\n                  \n                  {/*    */}\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {inputValue.length}\n                  </div>\n                </div>\n\n                {/*   */}\n                <div className=\"flex items-center gap-1.5\">\n                  {wsConnecting ? (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-xs text-yellow-600 dark:text-yellow-400\"> </span>\n                    </>\n                  ) : wsConnected ? (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-xs text-green-600 dark:text-green-400\"> </span>\n                    </>\n                  ) : (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-gray-400 rounded-full\"></div>\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400\"> </span>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            {/*    */}\n            <div className=\"text-center mt-4\">\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                AI    .    .\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;\n","import { useState, useEffect, useCallback } from \"react\";\nimport { conversationAPI, mockMessages } from \"../services/api\";\n\n/**\n *       \n *     \n */\nexport const useMessages = (conversationId) => {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [nextCursor, setNextCursor] = useState(null);\n\n  //  \n  const loadMessages = useCallback(\n    async (reset = false) => {\n      if (!conversationId || loading) {\n        console.log(\"useMessages -   :\", {\n          conversationId,\n          loading,\n        });\n        return;\n      }\n\n      console.log(\"useMessages -   :\", {\n        conversationId,\n        reset,\n        cursor: reset ? null : nextCursor,\n        currentMessagesCount: messages.length,\n      });\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const cursor = reset ? null : nextCursor;\n        const response = await conversationAPI.getMessages(\n          conversationId,\n          cursor\n        );\n\n        console.log(\"useMessages - API :\", {\n          conversationId,\n          messagesReceived: response.messages?.length || 0,\n          hasMore: response.hasMore,\n          nextCursor: response.nextCursor,\n          reset,\n        });\n\n        if (reset) {\n          setMessages(response.messages);\n        } else {\n          //     ()\n          setMessages((prev) => [...response.messages, ...prev]);\n        }\n\n        setHasMore(response.hasMore);\n        setNextCursor(response.nextCursor);\n      } catch (err) {\n        console.error(\"  :\", err);\n        console.error(\" conversationId:\", conversationId);\n        setError(\"  .\");\n\n        // API  mock  fallback\n        const conversationMessages = mockMessages[conversationId] || [];\n        console.log(\"useMessages - Mock  :\", {\n          conversationId,\n          mockMessagesCount: conversationMessages.length,\n        });\n\n        if (reset) {\n          setMessages(conversationMessages);\n          setHasMore(false);\n          setNextCursor(null);\n        }\n      } finally {\n        setLoading(false);\n      }\n    },\n    [conversationId, loading, nextCursor, messages.length]\n  );\n\n  //    ()\n  const addMessage = useCallback((message) => {\n    const newMessage = {\n      id: message.timestamp || new Date().toISOString(),\n      role: message.role,\n      content: message.content,\n      tokenCount: message.tokenCount || 0,\n      timestamp: message.timestamp || new Date().toISOString(),\n    };\n\n    setMessages((prev) => [...prev, newMessage]);\n    return newMessage;\n  }, []);\n\n  //   (   )\n  const updateMessage = useCallback((messageId, updates) => {\n    setMessages((prev) =>\n      prev.map((msg) => (msg.id === messageId ? { ...msg, ...updates } : msg))\n    );\n  }, []);\n\n  //  \n  const removeMessage = useCallback((messageId) => {\n    setMessages((prev) => prev.filter((msg) => msg.id !== messageId));\n  }, []);\n\n  //    ( )\n  const loadPreviousMessages = useCallback(() => {\n    if (hasMore && !loading) {\n      return loadMessages(false);\n    }\n    return Promise.resolve();\n  }, [hasMore, loading, loadMessages]);\n\n  //   (  )\n  const clearMessages = useCallback(() => {\n    setMessages([]);\n    setHasMore(true);\n    setNextCursor(null);\n    setError(null);\n  }, []);\n\n  // conversationId   \n  useEffect(() => {\n    console.log(\" [DEBUG] useMessages - conversationId  :\", {\n      conversationId,\n      conversationIdType: typeof conversationId,\n      isConversationIdNull: conversationId === null,\n      isConversationIdUndefined: conversationId === undefined,\n      previousConversationId: conversationId, //       \n    });\n\n    if (conversationId) {\n      console.log(\n        \" [DEBUG] useMessages -     :\",\n        conversationId\n      );\n      clearMessages();\n      loadMessages(true);\n    } else {\n      console.log(\n        \" [DEBUG] useMessages - conversationId null/undefined,  \"\n      );\n      clearMessages();\n    }\n  }, [conversationId]);\n\n  return {\n    messages,\n    loading,\n    error,\n    hasMore,\n    addMessage,\n    updateMessage,\n    removeMessage,\n    loadPreviousMessages,\n    clearMessages,\n    refresh: () => loadMessages(true),\n  };\n};\n","import React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  PlusIcon,\n  PencilIcon,\n  TrashIcon,\n  XMarkIcon,\n  SparklesIcon,\n  HashtagIcon,\n} from \"@heroicons/react/24/outline\";\nimport { promptCardAPI, handleAPIError } from \"../services/api\";\nimport ChatWindow from \"./chat/ChatWindow\";\n\nconst PromptCardManager = ({ projectId, projectName }) => {\n  const [promptCards, setPromptCards] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingCard, setEditingCard] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n\n  useEffect(() => {\n    loadPromptCards();\n  }, [projectId]);\n\n  const loadPromptCards = async () => {\n    try {\n      setLoading(true);\n      const response = await promptCardAPI.getPromptCards(projectId, true);\n      setPromptCards(response.promptCards || []);\n    } catch (error) {\n      console.error(\"   :\", error);\n      const errorInfo = handleAPIError(error);\n      toast.error(errorInfo.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveCard = async (cardData) => {\n    try {\n      //     \n      const backendData = {\n        title: cardData.title,\n        prompt_text: cardData.prompt_text,\n        tags: cardData.tags || [],\n        isActive: cardData.enabled !== false, // enabled isActive \n      };\n\n      if (editingCard) {\n        // \n        await promptCardAPI.updatePromptCard(\n          projectId,\n          editingCard.promptId || editingCard.prompt_id,\n          backendData\n        );\n        toast.success(\" \");\n      } else {\n        //  \n        await promptCardAPI.createPromptCard(projectId, backendData);\n        toast.success(\" \");\n      }\n\n      setShowForm(false);\n      setEditingCard(null);\n\n      //         (  )\n      await loadPromptCards();\n    } catch (error) {\n      console.error(\"  :\", error);\n      const errorInfo = handleAPIError(error);\n      toast.error(errorInfo.message);\n    }\n  };\n\n  const handleDeleteCard = async (promptId) => {\n    if (!window.confirm(\"   ?\")) {\n      return;\n    }\n\n    try {\n      //    \n      await promptCardAPI.deletePromptCard(projectId, promptId);\n      toast.success(\" \");\n\n      //    UI \n      setPromptCards((prev) =>\n        prev.filter((card) => (card.promptId || card.prompt_id) !== promptId)\n      );\n\n      //     \n      await loadPromptCards();\n    } catch (error) {\n      console.error(\"  :\", error);\n      const errorInfo = handleAPIError(error);\n      toast.error(errorInfo.message);\n    }\n  };\n\n  const handleEditCard = async (card) => {\n    console.log(\"   :\", card);\n\n    //     S3 \n    let cardWithContent = { ...card };\n\n    if (!card.prompt_text && !card.content) {\n      try {\n        console.log(\"S3    ...\");\n        const contentResponse = await promptCardAPI.getPromptContent(\n          projectId,\n          card.promptId || card.prompt_id\n        );\n        cardWithContent.prompt_text = contentResponse.content;\n        console.log(\n          \"S3    :\",\n          contentResponse.content?.length,\n          \"\"\n        );\n      } catch (error) {\n        console.error(\"   :\", error);\n        toast.error(\"    \");\n        return;\n      }\n    }\n\n    setEditingCard(cardWithContent);\n    setShowForm(true);\n  };\n\n  const handleNewCard = () => {\n    console.log(\"    \");\n    setEditingCard(null);\n    setShowForm(true);\n  };\n\n  const handleCancelForm = () => {\n    console.log(\"   \");\n    setShowForm(false);\n    setEditingCard(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-full w-full bg-gray-50 dark:bg-dark-primary\">\n      {/*   */}\n      <div className=\"flex-1 min-w-0 overflow-hidden\">\n        <ChatWindow\n          projectId={projectId}\n          projectName={projectName}\n          promptCards={promptCards}\n        />\n      </div>\n\n      {/*    () */}\n      <div className=\"w-80 bg-white dark:bg-dark-primary flex flex-col shadow-lg border-l border-gray-200 dark:border-gray-700 flex-shrink-0\">\n        <div className=\"flex-shrink-0 p-4 bg-gray-50 dark:bg-dark-primary\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold text-gray-800 dark:text-white\">\n               \n            </h2>\n            <button\n              onClick={handleNewCard}\n              className=\"inline-flex items-center px-4 py-2 text-sm bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-md hover:shadow-lg font-medium\"\n            >\n              <PlusIcon className=\"h-4 w-4 mr-1.5\" /> \n            </button>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3 min-h-0 max-h-[calc(100vh-140px)] bg-gray-50 dark:bg-dark-secondary custom-scrollbar\">\n          {promptCards.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <SparklesIcon className=\"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\n              <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\n                  \n              </p>\n              <button\n                onClick={handleNewCard}\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-sm font-medium\"\n              >\n                <PlusIcon className=\"h-4 w-4 mr-1.5\" />   \n              </button>\n            </div>\n          ) : (\n            promptCards.map((card) => (\n              <PromptCard\n                key={card.promptId || card.prompt_id}\n                card={card}\n                onEdit={() => handleEditCard(card)}\n                onDelete={() =>\n                  handleDeleteCard(card.promptId || card.prompt_id)\n                }\n              />\n            ))\n          )}\n        </div>\n      </div>\n\n      {/*     */}\n      {showForm && (\n        <PromptFormModal\n          isOpen={showForm}\n          onSubmit={handleSaveCard}\n          onCancel={handleCancelForm}\n          initialData={editingCard}\n        />\n      )}\n      \n      {/*   */}\n      <style jsx>{`\n        .custom-scrollbar::-webkit-scrollbar {\n          width: 8px;\n        }\n        .custom-scrollbar::-webkit-scrollbar-track {\n          background: transparent;\n          border-radius: 4px;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb {\n          background: #d1d5db;\n          border-radius: 4px;\n          border: 1px solid #f3f4f6;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n          background: #9ca3af;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb:active {\n          background: #6b7280;\n        }\n        /*   */\n        .dark .custom-scrollbar::-webkit-scrollbar-thumb {\n          background: #4b5563;\n          border: 1px solid #374151;\n        }\n        .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n          background: #6b7280;\n        }\n        .dark .custom-scrollbar::-webkit-scrollbar-thumb:active {\n          background: #9ca3af;\n        }\n      `}</style>\n    </div>\n  );\n};\n\n//    \nconst PromptCard = ({ card, onEdit, onDelete }) => {\n  return (\n    <div className=\"bg-white dark:bg-gray-600 rounded-xl p-4 flex flex-col space-y-3 shadow-md dark:shadow-lg hover:shadow-lg dark:hover:shadow-xl transition-all duration-200 hover:bg-blue-50 dark:hover:bg-gray-500\">\n      {/* Header: Title and Actions */}\n      <div className=\"flex items-start justify-between\">\n        <h3 className=\"font-semibold text-sm text-gray-800 dark:text-white leading-tight pr-2 flex-1\">\n          {card.title || ` ${card.promptId || card.prompt_id}`}\n        </h3>\n        <div className=\"flex items-center flex-shrink-0\">\n          <button\n            onClick={async (e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              await onEdit();\n            }}\n            className=\"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-dark-secondary hover:text-blue-600 dark:hover:text-blue-400 transition-colors\"\n          >\n            <PencilIcon className=\"h-4 w-4\" />\n          </button>\n          <button\n            onClick={onDelete}\n            className=\"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-dark-secondary hover:text-red-600 dark:hover:text-red-400 transition-colors\"\n          >\n            <TrashIcon className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Tags */}\n      {card.tags && card.tags.length > 0 && (\n        <div className=\"flex flex-wrap gap-1.5\">\n          {card.tags.slice(0, 3).map((tag) => (\n            <span\n              key={tag}\n              className=\"px-2 py-0.5 text-xs bg-gray-100 dark:bg-dark-secondary text-gray-700 dark:text-gray-300 rounded-full\"\n            >\n              #{tag}\n            </span>\n          ))}\n          {card.tags.length > 3 && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n              +{card.tags.length - 3}\n            </span>\n          )}\n        </div>\n      )}\n\n      {/* Content Snippet */}\n      {(card.content || card.prompt_text) && (\n        <p className=\"text-xs text-gray-600 dark:text-gray-300 leading-relaxed line-clamp-2\">\n          {card.content || card.prompt_text}\n        </p>\n      )}\n\n      {/* Date */}\n      <div className=\"flex items-end justify-between pt-2 text-xs text-gray-400 dark:text-gray-500\">\n        <span className=\"flex-shrink-0\">\n          :{\" \"}\n          {new Date(card.createdAt || new Date()).toLocaleDateString(\"ko-KR\", {\n            year: \"2-digit\",\n            month: \"2-digit\",\n            day: \"2-digit\",\n          })}\n        </span>\n        {card.updatedAt &&\n          new Date(card.updatedAt) > new Date(card.createdAt) && (\n            <span className=\"flex-shrink-0 ml-2\">\n              :{\" \"}\n              {new Date(card.updatedAt).toLocaleDateString(\"ko-KR\", {\n                year: \"2-digit\",\n                month: \"2-digit\",\n                day: \"2-digit\",\n              })}\n            </span>\n          )}\n      </div>\n    </div>\n  );\n};\n\n//     \nconst PromptFormModal = ({ isOpen, onSubmit, onCancel, initialData }) => {\n  const [formData, setFormData] = useState({\n    title: \"\",\n    prompt_text: \"\",\n    tags: [],\n    enabled: true,\n  });\n  const [tagInput, setTagInput] = useState(\"\");\n\n  useEffect(() => {\n    if (initialData) {\n      setFormData({\n        title: initialData.title || \"\",\n        prompt_text: initialData.prompt_text || initialData.content || \"\",\n        tags: Array.isArray(initialData.tags) ? [...initialData.tags] : [],\n        enabled:\n          initialData.enabled !== false && initialData.isActive !== false, // isActive \n      });\n    }\n  }, [initialData]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.prompt_text.trim()) {\n      toast.error(\"  \");\n      return;\n    }\n    onSubmit(formData);\n  };\n\n  const handleChange = (field, value) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const handleTagAdd = (e) => {\n    if (e.key === \"Enter\" && tagInput.trim()) {\n      e.preventDefault();\n      const newTag = tagInput.trim();\n      if (!formData.tags.includes(newTag) && formData.tags.length < 5) {\n        setFormData((prev) => ({\n          ...prev,\n          tags: [...prev.tags, newTag],\n        }));\n      }\n      setTagInput(\"\");\n    }\n  };\n\n  const handleTagRemove = (tagToRemove) => {\n    setFormData((prev) => ({\n      ...prev,\n      tags: prev.tags.filter((tag) => tag !== tagToRemove),\n    }));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white dark:bg-dark-secondary rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-xl dark:shadow-none transition-colors duration-300 \">\n        {/*  */}\n        <div className=\" p-6 bg-white dark:bg-dark-secondary\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gray-100 dark:bg-dark-tertiary rounded-lg flex items-center justify-center\">\n                {initialData ? (\n                  <PencilIcon className=\"h-6 w-6 text-gray-600 dark:text-gray-300\" />\n                ) : (\n                  <PencilIcon className=\"h-6 w-6 text-gray-600 dark:text-gray-300\" />\n                )}\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                  {initialData ? \" \" : \" \"}\n                </h3>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {initialData\n                    ? \"  \"\n                    : \"  \"}\n                </p>\n              </div>\n            </div>\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-tertiary transition-colors\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n\n        <form\n          onSubmit={handleSubmit}\n          className=\"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]\"\n        >\n          {/*   */}\n          <div className=\"space-y-2\">\n            <label className=\"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200\">\n               \n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => handleChange(\"title\", e.target.value)}\n              className=\"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-500/30 transition-all duration-200\"\n              placeholder=\"  \"\n            />\n          </div>\n\n          {/*  */}\n          <div className=\"space-y-2\">\n            <label className=\"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200\">\n              <HashtagIcon className=\"h-4 w-4 mr-2 text-gray-500 dark:text-gray-400\" />\n              \n            </label>\n            <div className=\"space-y-3\">\n              {/*   */}\n              <input\n                type=\"text\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                onKeyPress={handleTagAdd}\n                className=\"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-500/30 transition-all duration-200\"\n                placeholder=\"  Enter  ( 5)\"\n                maxLength={20}\n                disabled={formData.tags.length >= 5}\n              />\n\n              {/*   */}\n              {formData.tags.length > 0 && (\n                <div className=\"flex flex-wrap gap-2\">\n                  {formData.tags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm rounded-full\"\n                    >\n                      #{tag}\n                      <button\n                        type=\"button\"\n                        onClick={() => handleTagRemove(tag)}\n                        className=\"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200\"\n                      >\n                        <XMarkIcon className=\"h-3 w-3\" />\n                      </button>\n                    </span>\n                  ))}\n                </div>\n              )}\n\n              {/*   */}\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      .  \n                20  .\n              </p>\n            </div>\n          </div>\n\n          {/*   */}\n          <div className=\"space-y-2\">\n            <label className=\"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                <span className=\"text-red-500 ml-1\">*</span>\n            </label>\n            <div className=\"relative\">\n              <textarea\n                value={formData.prompt_text}\n                onChange={(e) => handleChange(\"prompt_text\", e.target.value)}\n                rows={12}\n                className=\"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 dark:focus:ring-green-500/30 transition-all duration-200 resize-none\"\n                placeholder=\"  \"\n                required\n              />\n              <div className=\"absolute bottom-3 right-3 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-2\">\n                <span>{formData.prompt_text.length} </span>\n                <span className=\"text-gray-400 dark:text-gray-500\">\n                  /  50  \n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/*   */}\n          <div className=\"flex items-center\">\n            <input\n              type=\"checkbox\"\n              id=\"enabled\"\n              checked={formData.enabled}\n              onChange={(e) => handleChange(\"enabled\", e.target.checked)}\n              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\"\n            />\n            <label\n              htmlFor=\"enabled\"\n              className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\"\n            >\n              \n            </label>\n          </div>\n\n          {/*   */}\n          <div className=\"flex justify-end space-x-3 pt-6 \">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700  rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium\"\n            >\n              \n            </button>\n            <button\n              type=\"submit\"\n              disabled={!formData.prompt_text.trim()}\n              className=\"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl\"\n            >\n              {initialData ? \"\" : \"\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default PromptCardManager;\n","import React from \"react\";\nimport PromptCardManager from \"./PromptCardManager\";\n\nconst AdminView = ({ projectId, projectName }) => {\n  return (\n    <div className=\"h-full w-full bg-white dark:bg-dark-primary transition-colors duration-300\">\n      <PromptCardManager projectId={projectId} projectName={projectName} />\n    </div>\n  );\n};\n\nexport default AdminView;\n","import React, { useState, useEffect } from \"react\";\nimport { promptCardAPI } from \"../services/api\";\nimport ChatWindow from \"./chat/ChatWindow\";\nimport { ChatInterfaceSkeleton } from \"./skeleton/SkeletonComponents\";\n\nconst UserView = ({ projectId, projectName }) => {\n  const [promptCards, setPromptCards] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const loadPromptCards = async () => {\n      try {\n        setLoading(true);\n        // AdminView  includeContent=true     \n        const response = await promptCardAPI.getPromptCards(projectId, true);\n        //   AdminView  \n        setPromptCards(response.promptCards || []);\n      } catch (error) {\n        console.warn(\"   :\", error);\n        setPromptCards([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadPromptCards();\n  }, [projectId]);\n\n  if (loading) {\n    return <ChatInterfaceSkeleton />;\n  }\n\n  return (\n    <div className=\"h-screen bg-white dark:bg-dark-primary transition-colors duration-300\">\n      <ChatWindow\n        projectId={projectId}\n        projectName={projectName}\n        promptCards={promptCards}\n      />\n    </div>\n  );\n};\n\nexport default UserView;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-hot-toast\";\nimport { projectAPI, handleAPIError } from \"../services/api\";\nimport AdminView from \"./AdminView\";\nimport UserView from \"./UserView\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { ChatInterfaceSkeleton } from \"./skeleton/SkeletonComponents\";\n\nconst ProjectDetail = () => {\n  const { projectId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadProjectData();\n  }, [projectId, navigate]);\n\n  const loadProjectData = async () => {\n    try {\n      setLoading(true);\n\n      //        \n      let projectData;\n      if (user?.role === \"user\") {\n        //     \n        if (projectId && projectId !== \"default\") {\n          try {\n            projectData = await projectAPI.getProject(projectId);\n          } catch (error) {\n            console.log(\"API  ,   :\", error);\n            projectData = {\n              projectId: \"4039d9fc-d318-4903-804e-9cf5bf05ba8e\",\n              name: \"\",\n              description: \" AI   \",\n              promptCards: [],\n              createdAt: new Date().toISOString(),\n              updatedAt: new Date().toISOString(),\n            };\n          }\n        } else {\n          //    \n          projectData = {\n            projectId: \"4039d9fc-d318-4903-804e-9cf5bf05ba8e\",\n            name: \"\",\n            description: \" AI   \",\n            promptCards: [],\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          };\n        }\n      } else {\n        //  \n        try {\n          projectData = await projectAPI.getProject(projectId);\n        } catch (error) {\n          console.error(\"   :\", error);\n          throw error; //    \n        }\n      }\n\n      setProject(projectData);\n    } catch (error) {\n      console.error(\"  :\", error);\n      const errorInfo = handleAPIError(error);\n      toast.error(errorInfo.message);\n\n      //   \n      if (user?.role === \"admin\") {\n        navigate(\"/projects\");\n      } else {\n        navigate(\"/dashboard\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <ChatInterfaceSkeleton />;\n  }\n\n  if (!project) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-200\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n               \n          </h2>\n          <button\n            onClick={() => {\n              if (user?.role === \"admin\") {\n                navigate(\"/projects\");\n              } else {\n                navigate(\"/dashboard\");\n              }\n            }}\n            className=\"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none transition-colors duration-200\"\n          >\n            {user?.role === \"admin\" ? \" \" : \"\"}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen w-full bg-gray-50 dark:bg-dark-primary transition-all duration-500\">\n      {user?.role === \"admin\" ? (\n        //  :    + \n        <AdminView\n          projectId={project.projectId || projectId}\n          projectName={project.name}\n        />\n      ) : (\n        //  : \n        <UserView\n          projectId={project.projectId || projectId}\n          projectName={project.name}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ProjectDetail;\n"],"names":["_ref","isOpen","onClose","className","onCollapsedChange","conversations","loading","error","hasMore","loadMore","createConversation","deleteConversation","updateConversation","useConversations","setConversations","useState","setLoading","setError","setHasMore","nextCursor","setNextCursor","loadConversations","useCallback","async","reset","arguments","length","undefined","cursor","response","conversationAPI","getConversations","prev","err","_err$response","_err$response2","_err$response3","_err$response4","console","message","status","data","config","errorMessage","code","log","mockConversations","title","newConversation","id","conversationId","startedAt","lastActivityAt","tokenSum","mockConversation","Date","now","toString","toISOString","updates","map","conv","warn","filter","removeConversation","refresh","useEffect","currentConversationId","setCurrentConversation","useConversationContext","isCreating","setIsCreating","isCollapsed","setIsCollapsed","createError","setCreateError","deletingId","setDeletingId","deleteError","setDeleteError","activeMenuId","setActiveMenuId","editingId","setEditingId","editingTitle","setEditingTitle","conversationListRef","useRef","current","scrollTop","scrollHeight","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","handleNewChat","conversationIdType","isConversationIdNull","isConversationIdUndefined","window","innerWidth","setTimeout","handleSaveEdit","trim","alert","handleCancelEdit","conversationGroups","groups","today","yesterday","setDate","getDate","forEach","conversation","date","createdAt","isToday","toDateString","isYesterday","key","toLocaleDateString","year","month","push","groupConversationsByDate","_jsxs","_Fragment","children","_jsx","onClick","style","overscrollBehavior","newCollapsed","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","disabled","ref","onScroll","e","stopPropagation","jsx","Array","_","i","Object","entries","_ref2","groupTitle","groupConversations","type","value","onChange","onKeyPress","autoFocus","handleSelectConversation","handleToggleMenu","handleStartEdit","currentTitle","confirm","remainingConversations","handleDeleteConversation","MODELS","name","provider","category","speed","quality","description","recommended","new","selectedModel","onModelChange","setIsOpen","setFilter","currentModel","find","model","filteredModels","toLowerCase","SparklesIcon","replace","ChevronDownIcon","label","filterOption","handleModelSelect","modelId","copyToClipboard","text","successMessage","navigator","clipboard","writeText","toast","success","getAgentName","agentType","journalism","balanced","click","seo","social","formatMultiAgentContent","agentSummary","allTitles","content","index","agent","agentName","titles","tokenCount","useChat","projectId","projectName","promptCards","user","useAuth","isFirstRender","promptCardsLength","userId","messages","setMessages","inputValue","setInputValue","copiedMessage","setCopiedMessage","canSendMessage","setCanSendMessage","inputHeight","setInputHeight","setSelectedModel","streamingMessageIdRef","currentWebSocketRef","currentExecutionIdRef","messagesEndRef","inputRef","isUserScrolling","setIsUserScrolling","scrollContainerRef","lastScrollTopRef","isExecuting","isGenerating","isStreaming","executeOrchestration","resetOrchestration","setIsExecuting","currentExecution","setCurrentExecution","executionStatus","setExecutionStatus","setIsStreaming","userInput","options","chat_history","prompt_cards","inputLength","historyLength","promptCardsCount","useStreaming","timestamp","onChunk","onError","_error$message","_error$message2","_error$message3","_error$message4","includes","onComplete","_response$result","resultLength","result","generateAPI","generateTitleStream","streamError","generateTitle","mode","_error$response","_error$response2","_error$message5","_error$response3","_error$response4","_error$response4$data","_error$response5","_error$response6","_error$response7","setup_required","pollOrchestrationResult","executionArn","poll","getExecutionStatus","Error","useOrchestration","isConnected","wsConnected","isConnecting","wsConnecting","wsError","startStreaming","wsStartStreaming","addMessageListener","removeMessageListener","setIsConnected","setIsConnecting","wsRef","reconnectTimeoutRef","reconnectAttempts","getWebSocketUrl","wsUrl","process","startsWith","normalizedUrl","connect","_wsRef$current","_wsRef$current2","readyState","WebSocket","OPEN","CONNECTING","close","wsConnectStart","connectionTimeout","_wsRef$current3","onopen","_wsRef$current4","_wsRef$current5","_wsRef$current6","clearTimeout","url","protocol","extensions","onclose","connectionDuration","reason","wasClean","delay","Math","min","pow","onerror","_wsRef$current7","_wsRef$current8","disconnect","sendMessage","_wsRef$current9","send","JSON","stringify","chatHistory","userSub","action","listener","timer","prevProjectIdRef","useWebSocket","handleScroll","container","currentScrollTop","maxScrollTop","clientHeight","abs","scrollToBottom","scrollIntoView","behavior","handleWebSocketMessage","_data$message7","parse","currentStreamingId","step","progress","updatedMessages","streamingMsgIndex","findIndex","msg","messagesLength","currentContent","isLoading","m","fullContent","_data$message","_data$message2","_data$message3","_data$message4","_data$message5","_data$message6","errorContent","isError","toastMessage","handleStreamingResponse","chunk","metadata","handleStreamingComplete","performance_metrics","model_info","handleStopGeneration","adjustInputHeight","lines","split","charBasedLines","ceil","estimatedLines","max","calculatedHeight","handleInputChange","handleSendMessage","userMessage","streamMsgId","streamingMessage","allMessages","role","trimmedChatHistory","slice","totalMessages","fullHistoryLength","trimmedHistoryLength","maxHistoryLength","recentHistory","activePromptCards","isArray","card","isActive","enabled","promptId","prompt_id","prompt_text","tags","stepOrder","sort","a","b","messageContent","chatHistoryLength","contentLength","hasContent","conversationIdValue","crewAPI","createCrewInstance","instanceError","_instanceError$respon","shouldRedirect","handleAPIError","multiAgentResult","executeMultiAgent","assistantMessage","agentResults","finalTitles","tokenUsage","keys","agentResult","values","flat","isMultiAgent","processMultiAgentResponse","errorUserMessage","errorDetails","handleKeyPress","shiftKey","preventDefault","handleCopyMessage","messageId","handleCopyTitle","resetChat","streamingMessageId","formatTimestamp","toLocaleTimeString","hour","minute","hour12","isNaN","getTime","onCopyMessage","onCopyTitle","isUser","likeClicked","setLikeClicked","dislikeClicked","setDislikeClicked","copyClicked","setCopyClicked","ExclamationTriangleIcon","animationDelay","ReactMarkdown","handleLikeClick","handleDislikeClick","sidebarCollapsed","setSidebarCollapsed","addMessage","historicalMessages","messagesLoading","loadMessages","currentMessagesCount","_response$messages","getMessages","messagesReceived","conversationMessages","mockMessages","mockMessagesCount","newMessage","updateMessage","removeMessage","loadPreviousMessages","Promise","resolve","clearMessages","previousConversationId","useMessages","chatMessages","originalHandleSendMessage","messageData","ConversationDrawer","SimpleChatMessage","ChatBubbleLeftRightIcon","placeholder","rows","height","minHeight","maxHeight","lineHeight","overflowY","StopIcon","PaperAirplaneIcon","ModelSelector","PromptCard","onEdit","onDelete","PencilIcon","TrashIcon","tag","day","updatedAt","PromptFormModal","_ref3","onSubmit","onCancel","initialData","formData","setFormData","tagInput","setTagInput","handleChange","field","XMarkIcon","HashtagIcon","newTag","maxLength","handleTagRemove","tagToRemove","required","checked","htmlFor","setPromptCards","editingCard","setEditingCard","showForm","setShowForm","loadPromptCards","promptCardAPI","getPromptCards","errorInfo","handleNewCard","ChatWindow","PlusIcon","cardWithContent","_contentResponse$cont","contentResponse","getPromptContent","handleEditCard","deletePromptCard","handleDeleteCard","backendData","cardData","updatePromptCard","createPromptCard","handleCancelForm","PromptCardManager","ChatInterfaceSkeleton","ProjectDetail","useParams","navigate","useNavigate","project","setProject","loadProjectData","projectData","projectAPI","getProject","AdminView","UserView"],"sourceRoot":""}