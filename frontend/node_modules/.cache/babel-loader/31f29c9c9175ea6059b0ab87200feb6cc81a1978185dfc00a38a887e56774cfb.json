{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{useConversations}from\"../../hooks/useConversations\";import{useConversationContext}from\"../../contexts/ConversationContext\";import{conversationAPI}from\"../../services/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ConversationDrawer=_ref=>{let{isOpen,onClose,className=\"\",onCollapsedChange}=_ref;const{conversations,loading,error,hasMore,loadMore,createConversation,deleteConversation,updateConversation}=useConversations();const{currentConversationId,setCurrentConversation}=useConversationContext();const[isCreating,setIsCreating]=useState(false);const[isCollapsed,setIsCollapsed]=useState(false);const[createError,setCreateError]=useState(null);const[deletingId,setDeletingId]=useState(null);const[deleteError,setDeleteError]=useState(null);const[activeMenuId,setActiveMenuId]=useState(null);const[editingId,setEditingId]=useState(null);const[editingTitle,setEditingTitle]=useState(\"\");// ëŒ€í™” ëª©ë¡ ìŠ¤í¬ë¡¤ì„ ìœ„í•œ ref\nconst conversationListRef=useRef(null);// ìƒˆ ëŒ€í™”ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤\nuseEffect(()=>{if(conversationListRef.current&&conversations.length>0&&!isCollapsed){conversationListRef.current.scrollTop=conversationListRef.current.scrollHeight;}},[conversations.length,isCollapsed]);// ì™¸ë¶€ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°\nuseEffect(()=>{const handleClickOutside=event=>{if(activeMenuId&&!event.target.closest(\".conversation-menu\")){setActiveMenuId(null);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[activeMenuId]);// ìƒˆ ëŒ€í™” ìƒì„±\nconst handleNewChat=async()=>{if(isCreating)return;setIsCreating(true);setCreateError(null);try{console.log(\"ğŸ” [DEBUG] ìƒˆ ëŒ€í™” ìƒì„± ì‹œì‘\");const newConversation=await createConversation(\"ìƒˆ ëŒ€í™”\");console.log(\"ğŸ” [DEBUG] ìƒˆ ëŒ€í™” ìƒì„± ì™„ë£Œ:\",{newConversation,conversationId:newConversation===null||newConversation===void 0?void 0:newConversation.id,conversationIdType:typeof(newConversation===null||newConversation===void 0?void 0:newConversation.id),isConversationIdNull:(newConversation===null||newConversation===void 0?void 0:newConversation.id)===null,isConversationIdUndefined:(newConversation===null||newConversation===void 0?void 0:newConversation.id)===undefined});console.log(\"ğŸ” [DEBUG] setCurrentConversation í˜¸ì¶œ ì „ - í˜„ì¬ ID:\",currentConversationId);setCurrentConversation(newConversation.id);console.log(\"ğŸ” [DEBUG] setCurrentConversation í˜¸ì¶œ ì™„ë£Œ - ìƒˆ ID:\",newConversation.id);if(window.innerWidth<768){onClose();}}catch(error){console.error(\"ìƒˆ ëŒ€í™” ìƒì„± ì‹¤íŒ¨:\",error);setCreateError(\"ìƒˆ ëŒ€í™”ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");setTimeout(()=>setCreateError(null),3000);}finally{setIsCreating(false);}};// ëŒ€í™” ì„ íƒ\nconst handleSelectConversation=conversationId=>{setCurrentConversation(conversationId);if(window.innerWidth<768){onClose();}};// ëŒ€í™” ì‚­ì œ\nconst handleDeleteConversation=async(conversationId,event)=>{event.stopPropagation();// ëŒ€í™” ì„ íƒì„ ë°©ì§€\nif(!window.confirm(\"ì´ ëŒ€í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")){return;}setDeletingId(conversationId);setDeleteError(null);setActiveMenuId(null);// ë©”ë‰´ ë‹«ê¸°\ntry{await deleteConversation(conversationId);// í˜„ì¬ ì„ íƒëœ ëŒ€í™”ê°€ ì‚­ì œëœ ê²½ìš° ì²« ë²ˆì§¸ ëŒ€í™”ë¡œ ì´ë™\nif(currentConversationId===conversationId&&conversations.length>1){const remainingConversations=conversations.filter(conv=>conv.id!==conversationId);if(remainingConversations.length>0){setCurrentConversation(remainingConversations[0].id);}}console.log(\"ëŒ€í™” ì‚­ì œ ì™„ë£Œ:\",conversationId);}catch(error){console.error(\"ëŒ€í™” ì‚­ì œ ì¤‘ ì˜¤ë¥˜:\",error);// ì¼ë°˜ì ìœ¼ë¡œ API ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë¡œì»¬ì—ì„œëŠ” ì‚­ì œë˜ë¯€ë¡œ ì—ëŸ¬ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n// setDeleteError('ëŒ€í™”ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\n// setTimeout(() => setDeleteError(null), 3000);\n}finally{setDeletingId(null);}};// ëŒ€í™” ìˆ˜ì • ì‹œì‘\nconst handleStartEdit=(conversationId,currentTitle,event)=>{event.stopPropagation();setEditingId(conversationId);setEditingTitle(currentTitle);setActiveMenuId(null);// ë©”ë‰´ ë‹«ê¸°\n};// ëŒ€í™” ìˆ˜ì • ì™„ë£Œ\nconst handleSaveEdit=async conversationId=>{if(!editingTitle.trim()){setEditingId(null);setEditingTitle(\"\");return;}try{// API í˜¸ì¶œë¡œ ëŒ€í™” ì œëª© ì—…ë°ì´íŠ¸\nconsole.log(\"ëŒ€í™” ì œëª© ì—…ë°ì´íŠ¸:\",conversationId,editingTitle);await conversationAPI.updateConversation(conversationId,{title:editingTitle});// ë¡œì»¬ ìƒíƒœë„ ì—…ë°ì´íŠ¸\nupdateConversation(conversationId,{title:editingTitle});setEditingId(null);setEditingTitle(\"\");console.log(\"ëŒ€í™” ì œëª© ìˆ˜ì • ì™„ë£Œ\");}catch(error){console.error(\"ëŒ€í™” ì œëª© ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:\",error);// ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ í‘œì‹œ\nalert(\"ì œëª© ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");}};// ëŒ€í™” ìˆ˜ì • ì·¨ì†Œ\nconst handleCancelEdit=()=>{setEditingId(null);setEditingTitle(\"\");};// ë©”ë‰´ í† ê¸€\nconst handleToggleMenu=(conversationId,event)=>{event.stopPropagation();setActiveMenuId(activeMenuId===conversationId?null:conversationId);};// ëŒ€í™”ë¥¼ ë‚ ì§œë³„ë¡œ ê·¸ë£¹í™”\nconst groupConversationsByDate=conversations=>{const groups={};const today=new Date();const yesterday=new Date(today);yesterday.setDate(yesterday.getDate()-1);conversations.forEach(conversation=>{const date=new Date(conversation.lastActivityAt||conversation.createdAt);const isToday=date.toDateString()===today.toDateString();const isYesterday=date.toDateString()===yesterday.toDateString();let key;if(isToday){key=\"Today\";}else if(isYesterday){key=\"Yesterday\";}else{const monthYear=date.toLocaleDateString(\"ko-KR\",{year:\"numeric\",month:\"2-digit\"});key=monthYear;}if(!groups[key]){groups[key]=[];}groups[key].push(conversation);});return groups;};const conversationGroups=groupConversationsByDate(conversations);return/*#__PURE__*/_jsxs(_Fragment,{children:[isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\",onClick:onClose}),/*#__PURE__*/_jsxs(\"div\",{className:`\n        conversation-drawer\n        fixed top-0 left-0 h-full z-[9999]\n        bg-[#0d1117]\n        border-r border-[#21262d] shadow-[inset_0_0_16px_rgba(0,0,0,0.4)]\n        transform transition-all duration-500 ease-out\n        ${isOpen?\"translate-x-0\":\"-translate-x-full\"}\n        md:translate-x-0\n        ${isCollapsed?\"w-14\":\"w-full md:w-64\"}\n        ${className}\n      `,style:{overscrollBehavior:\"contain\"},children:[!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#21262d] relative transition-opacity duration-300 ease-in-out\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold tracking-tight text-[#e6edf3]\",children:\"TITLE-NOMICS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newCollapsed=!isCollapsed;setIsCollapsed(newCollapsed);if(onCollapsedChange){onCollapsedChange(newCollapsed);}},className:\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\",title:\"\\uC0AC\\uC774\\uB4DC\\uBC14 \\uC811\\uAE30\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"})})})]}),isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"p-2 flex justify-center border-b border-[#21262d]\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newCollapsed=!isCollapsed;setIsCollapsed(newCollapsed);if(onCollapsedChange){onCollapsedChange(newCollapsed);}},className:\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\",title:\"\\uC0AC\\uC774\\uB4DC\\uBC14 \\uD3BC\\uCE58\\uAE30\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200 rotate-180\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"})})})}),!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-[#21262d] transition-opacity duration-300 ease-in-out\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleNewChat,disabled:isCreating,className:\"group w-full flex items-center justify-start gap-3 px-3 py-2.5 text-[#e6edf3] hover:bg-[#21262d] disabled:bg-[#374151] rounded-lg text-sm transition-all duration-200 focus:outline-none border border-[#6e7681] hover:border-[#8b949e]\",title:\"\\uC0C8 \\uCC44\\uD305\",children:isCreating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-5 h-5 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-[#e6edf3]\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uC0DD\\uC131 \\uC911...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-5 h-5 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"2\",stroke:\"currentColor\",className:\"h-4 w-4 group-hover:scale-110 transition-transform duration-200\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 4.5v15m7.5-7.5h-15\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uC0C8 \\uCC44\\uD305\"})]})}),(createError||deleteError)&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-400\",children:createError||deleteError})})]}),/*#__PURE__*/_jsxs(\"div\",{ref:conversationListRef,className:\"flex flex-col gap-0.5 overflow-y-auto h-[calc(100vh-210px)] custom-scrollbar\",onScroll:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n            /* CSS Custom Properties for Design System */\n            .conversation-drawer {\n              --color-bg-primary: #0d1117;\n              --color-bg-secondary: #11161f;\n              --color-bg-tertiary: #161b22;\n              --color-border: #21262d;\n              --color-text-primary: #e6edf3;\n              --color-text-secondary: #88929d;\n              --color-accent: #10b981;\n              --color-accent-hover: #059669;\n              --color-danger: #f85149;\n              --shadow-depth: inset 0 0 16px rgba(0, 0, 0, 0.4);\n            }\n\n            .custom-scrollbar::-webkit-scrollbar {\n              width: 8px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-track {\n              background: transparent;\n              border-radius: 4px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb {\n              background: var(--color-border);\n              border-radius: 4px;\n              border: 1px solid var(--color-bg-primary);\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n              background: #30363d;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:active {\n              background: #484f58;\n            }\n            .custom-scrollbar::-webkit-scrollbar-corner {\n              background: transparent;\n            }\n\n            /* ì‚¬ì´ë“œë°” ìŠ¤í¬ë¡¤ ê²©ë¦¬ */\n            .custom-scrollbar {\n              overscroll-behavior: contain;\n              scroll-behavior: smooth;\n            }\n          `}),error&&!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center bg-red-900/30 rounded-lg border border-red-700/50 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-red-300 text-sm font-medium\",children:error})}),conversations.length===0&&!loading&&!error&&!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl flex items-center justify-center shadow-lg border border-gray-700/30\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"h-6 w-6 text-gray-400\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-white mb-2 drop-shadow\",children:\"\\uC544\\uC9C1 \\uB300\\uD654\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 leading-snug opacity-80\",children:\"\\uC0C8 \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD574\\uC11C AI\\uC640 \\uB300\\uD654\\uD574\\uBCF4\\uC138\\uC694!\"})]}),loading&&conversations.length===0&&!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-1\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-10 px-3 bg-gray-900/40 animate-pulse flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-700/40 rounded w-3/4\"})},i))}),!isCollapsed&&conversations.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-1 transition-opacity duration-300 ease-in-out\",children:Object.entries(conversationGroups).map(_ref2=>{let[groupTitle,groupConversations]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-white/40 uppercase tracking-wide py-2 px-3 font-medium\",children:groupTitle}),groupConversations.map(conversation=>/*#__PURE__*/_jsx(\"div\",{className:`\n                        flex items-center justify-between h-10 px-3 py-2 text-sm transition-colors duration-200 relative\n                        ${currentConversationId===conversation.id?\"bg-[#161b22] text-[#e6edf3] relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-[2px] before:bg-[#10b981]\":\"text-[#88929d] hover:bg-[#11161f] hover:text-[#e6edf3]\"}\n                      `,children:editingId===conversation.id?/*#__PURE__*/// ìˆ˜ì • ëª¨ë“œ\n_jsxs(\"div\",{className:\"flex-1 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingTitle,onChange:e=>setEditingTitle(e.target.value),onKeyPress:e=>{if(e.key===\"Enter\"){handleSaveEdit(conversation.id);}else if(e.key===\"Escape\"){handleCancelEdit();}},className:\"flex-1 bg-[#0d1117] border border-[#21262d] rounded px-2 py-1 text-sm text-[#e6edf3] focus:outline-none focus:border-[#10b981]\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSaveEdit(conversation.id),className:\"p-1 text-[#10b981] hover:bg-[#161b22] rounded\",title:\"\\uC800\\uC7A5\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"2\",stroke:\"currentColor\",className:\"h-4 w-4\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"m4.5 12.75 6 6 9-13.5\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelEdit,className:\"p-1 text-[#88929d] hover:text-[#f85149] hover:bg-[#161b22] rounded\",title:\"\\uCDE8\\uC18C\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"2\",stroke:\"currentColor\",className:\"h-4 w-4\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M6 18L18 6M6 6l12 12\"})})})]}):/*#__PURE__*/// ì¼ë°˜ ëª¨ë“œ\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSelectConversation(conversation.id),className:\"flex-1 text-left truncate focus:outline-none py-2\",title:conversation.title,children:/*#__PURE__*/_jsx(\"span\",{className:\"truncate text-sm font-medium\",children:conversation.title||\"ìƒˆ ëŒ€í™”\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-menu relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>handleToggleMenu(conversation.id,e),className:\"ml-2 py-2 px-2 text-[#88929d] hover:text-[#e6edf3] transition-colors duration-200 flex-shrink-0 rounded-md hover:bg-[#161b22]\",title:\"\\uBA54\\uB274\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"h-5 w-5\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"})})}),activeMenuId===conversation.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 top-full mt-1 bg-[#21262d] border border-[#30363d] rounded-md shadow-lg z-50 min-w-[120px]\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>handleStartEdit(conversation.id,conversation.title,e),className:\"w-full px-3 py-2 text-sm text-[#e6edf3] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"h-4 w-4\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"})}),\"\\uC218\\uC815\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:e=>handleDeleteConversation(conversation.id,e),disabled:deletingId===conversation.id,className:\"w-full px-3 py-2 text-sm text-[#f85149] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200 disabled:opacity-50\",children:[deletingId===conversation.id?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b border-[#f85149]\"}):/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"h-4 w-4\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"})}),\"\\uC0AD\\uC81C\"]})]})]})]})},conversation.id))]},groupTitle);})}),isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center p-2 transition-opacity duration-300 ease-in-out\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleNewChat,disabled:isCreating,className:\"w-10 h-10 bg-[#21262d] hover:bg-[#30363d] disabled:bg-[#374151] text-white rounded-full flex items-center justify-center transition-colors duration-200 focus:outline-none border border-[#30363d] hover:border-[#444c56]\",title:\"\\uC0C8 \\uB300\\uD654\",children:isCreating?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}):/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"2\",stroke:\"currentColor\",className:\"h-6 w-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 4.5v15m7.5-7.5h-15\"})})})})]}),loading&&conversations.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mx-auto\"})}),hasMore&&!loading&&conversations.length>0&&!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:loadMore,className:\"text-xs text-white/60 hover:text-white/80 transition-colors duration-200 px-3 py-1.5 hover:bg-gray-800/40 rounded\",children:\"\\uB354 \\uBCF4\\uAE30\"})})]})]});};export default ConversationDrawer;","map":{"version":3,"names":["React","useState","useRef","useEffect","useConversations","useConversationContext","conversationAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ConversationDrawer","_ref","isOpen","onClose","className","onCollapsedChange","conversations","loading","error","hasMore","loadMore","createConversation","deleteConversation","updateConversation","currentConversationId","setCurrentConversation","isCreating","setIsCreating","isCollapsed","setIsCollapsed","createError","setCreateError","deletingId","setDeletingId","deleteError","setDeleteError","activeMenuId","setActiveMenuId","editingId","setEditingId","editingTitle","setEditingTitle","conversationListRef","current","length","scrollTop","scrollHeight","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","handleNewChat","console","log","newConversation","conversationId","id","conversationIdType","isConversationIdNull","isConversationIdUndefined","undefined","window","innerWidth","setTimeout","handleSelectConversation","handleDeleteConversation","stopPropagation","confirm","remainingConversations","filter","conv","handleStartEdit","currentTitle","handleSaveEdit","trim","title","alert","handleCancelEdit","handleToggleMenu","groupConversationsByDate","groups","today","Date","yesterday","setDate","getDate","forEach","conversation","date","lastActivityAt","createdAt","isToday","toDateString","isYesterday","key","monthYear","toLocaleDateString","year","month","push","conversationGroups","children","onClick","style","overscrollBehavior","newCollapsed","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","disabled","ref","onScroll","e","Array","map","_","i","Object","entries","_ref2","groupTitle","groupConversations","type","value","onChange","onKeyPress","autoFocus"],"sources":["/Users/yeong-gwang/Documents/work/á„‰á…¥á„‹á…®á†¯á„€á…§á†¼á„Œá…¦á„‰á…µá†«á„†á…®á†«/dev/nexus/title_generator_ver1/frontend/src/components/chat/ConversationDrawer.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useConversations } from \"../../hooks/useConversations\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { conversationAPI } from \"../../services/api\";\n\nconst ConversationDrawer = ({\n  isOpen,\n  onClose,\n  className = \"\",\n  onCollapsedChange,\n}) => {\n  const {\n    conversations,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    createConversation,\n    deleteConversation,\n    updateConversation,\n  } = useConversations();\n\n  const { currentConversationId, setCurrentConversation } =\n    useConversationContext();\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [createError, setCreateError] = useState(null);\n  const [deletingId, setDeletingId] = useState(null);\n  const [deleteError, setDeleteError] = useState(null);\n  const [activeMenuId, setActiveMenuId] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState(\"\");\n\n  // ëŒ€í™” ëª©ë¡ ìŠ¤í¬ë¡¤ì„ ìœ„í•œ ref\n  const conversationListRef = useRef(null);\n\n  // ìƒˆ ëŒ€í™”ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤\n  useEffect(() => {\n    if (\n      conversationListRef.current &&\n      conversations.length > 0 &&\n      !isCollapsed\n    ) {\n      conversationListRef.current.scrollTop =\n        conversationListRef.current.scrollHeight;\n    }\n  }, [conversations.length, isCollapsed]);\n\n  // ì™¸ë¶€ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (activeMenuId && !event.target.closest(\".conversation-menu\")) {\n        setActiveMenuId(null);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [activeMenuId]);\n\n  // ìƒˆ ëŒ€í™” ìƒì„±\n  const handleNewChat = async () => {\n    if (isCreating) return;\n\n    setIsCreating(true);\n    setCreateError(null);\n\n    try {\n      console.log(\"ğŸ” [DEBUG] ìƒˆ ëŒ€í™” ìƒì„± ì‹œì‘\");\n      const newConversation = await createConversation(\"ìƒˆ ëŒ€í™”\");\n      console.log(\"ğŸ” [DEBUG] ìƒˆ ëŒ€í™” ìƒì„± ì™„ë£Œ:\", {\n        newConversation,\n        conversationId: newConversation?.id,\n        conversationIdType: typeof newConversation?.id,\n        isConversationIdNull: newConversation?.id === null,\n        isConversationIdUndefined: newConversation?.id === undefined,\n      });\n\n      console.log(\n        \"ğŸ” [DEBUG] setCurrentConversation í˜¸ì¶œ ì „ - í˜„ì¬ ID:\",\n        currentConversationId\n      );\n      setCurrentConversation(newConversation.id);\n      console.log(\n        \"ğŸ” [DEBUG] setCurrentConversation í˜¸ì¶œ ì™„ë£Œ - ìƒˆ ID:\",\n        newConversation.id\n      );\n\n      if (window.innerWidth < 768) {\n        onClose();\n      }\n    } catch (error) {\n      console.error(\"ìƒˆ ëŒ€í™” ìƒì„± ì‹¤íŒ¨:\", error);\n      setCreateError(\"ìƒˆ ëŒ€í™”ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");\n      setTimeout(() => setCreateError(null), 3000);\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  // ëŒ€í™” ì„ íƒ\n  const handleSelectConversation = (conversationId) => {\n    setCurrentConversation(conversationId);\n\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n  };\n\n  // ëŒ€í™” ì‚­ì œ\n  const handleDeleteConversation = async (conversationId, event) => {\n    event.stopPropagation(); // ëŒ€í™” ì„ íƒì„ ë°©ì§€\n\n    if (!window.confirm(\"ì´ ëŒ€í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      return;\n    }\n\n    setDeletingId(conversationId);\n    setDeleteError(null);\n    setActiveMenuId(null); // ë©”ë‰´ ë‹«ê¸°\n\n    try {\n      await deleteConversation(conversationId);\n\n      // í˜„ì¬ ì„ íƒëœ ëŒ€í™”ê°€ ì‚­ì œëœ ê²½ìš° ì²« ë²ˆì§¸ ëŒ€í™”ë¡œ ì´ë™\n      if (\n        currentConversationId === conversationId &&\n        conversations.length > 1\n      ) {\n        const remainingConversations = conversations.filter(\n          (conv) => conv.id !== conversationId\n        );\n        if (remainingConversations.length > 0) {\n          setCurrentConversation(remainingConversations[0].id);\n        }\n      }\n\n      console.log(\"ëŒ€í™” ì‚­ì œ ì™„ë£Œ:\", conversationId);\n    } catch (error) {\n      console.error(\"ëŒ€í™” ì‚­ì œ ì¤‘ ì˜¤ë¥˜:\", error);\n      // ì¼ë°˜ì ìœ¼ë¡œ API ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë¡œì»¬ì—ì„œëŠ” ì‚­ì œë˜ë¯€ë¡œ ì—ëŸ¬ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n      // setDeleteError('ëŒ€í™”ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\n      // setTimeout(() => setDeleteError(null), 3000);\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  // ëŒ€í™” ìˆ˜ì • ì‹œì‘\n  const handleStartEdit = (conversationId, currentTitle, event) => {\n    event.stopPropagation();\n    setEditingId(conversationId);\n    setEditingTitle(currentTitle);\n    setActiveMenuId(null); // ë©”ë‰´ ë‹«ê¸°\n  };\n\n  // ëŒ€í™” ìˆ˜ì • ì™„ë£Œ\n  const handleSaveEdit = async (conversationId) => {\n    if (!editingTitle.trim()) {\n      setEditingId(null);\n      setEditingTitle(\"\");\n      return;\n    }\n\n    try {\n      // API í˜¸ì¶œë¡œ ëŒ€í™” ì œëª© ì—…ë°ì´íŠ¸\n      console.log(\"ëŒ€í™” ì œëª© ì—…ë°ì´íŠ¸:\", conversationId, editingTitle);\n      await conversationAPI.updateConversation(conversationId, {\n        title: editingTitle,\n      });\n\n      // ë¡œì»¬ ìƒíƒœë„ ì—…ë°ì´íŠ¸\n      updateConversation(conversationId, { title: editingTitle });\n\n      setEditingId(null);\n      setEditingTitle(\"\");\n\n      console.log(\"ëŒ€í™” ì œëª© ìˆ˜ì • ì™„ë£Œ\");\n    } catch (error) {\n      console.error(\"ëŒ€í™” ì œëª© ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:\", error);\n      // ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ í‘œì‹œ\n      alert(\"ì œëª© ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");\n    }\n  };\n\n  // ëŒ€í™” ìˆ˜ì • ì·¨ì†Œ\n  const handleCancelEdit = () => {\n    setEditingId(null);\n    setEditingTitle(\"\");\n  };\n\n  // ë©”ë‰´ í† ê¸€\n  const handleToggleMenu = (conversationId, event) => {\n    event.stopPropagation();\n    setActiveMenuId(activeMenuId === conversationId ? null : conversationId);\n  };\n\n  // ëŒ€í™”ë¥¼ ë‚ ì§œë³„ë¡œ ê·¸ë£¹í™”\n  const groupConversationsByDate = (conversations) => {\n    const groups = {};\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    conversations.forEach((conversation) => {\n      const date = new Date(\n        conversation.lastActivityAt || conversation.createdAt\n      );\n      const isToday = date.toDateString() === today.toDateString();\n      const isYesterday = date.toDateString() === yesterday.toDateString();\n\n      let key;\n      if (isToday) {\n        key = \"Today\";\n      } else if (isYesterday) {\n        key = \"Yesterday\";\n      } else {\n        const monthYear = date.toLocaleDateString(\"ko-KR\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n        });\n        key = monthYear;\n      }\n\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(conversation);\n    });\n\n    return groups;\n  };\n\n  const conversationGroups = groupConversationsByDate(conversations);\n\n  return (\n    <>\n      {/* ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* ë“œë¡œì–´ ì»¨í…Œì´ë„ˆ */}\n      <div\n        className={`\n        conversation-drawer\n        fixed top-0 left-0 h-full z-[9999]\n        bg-[#0d1117]\n        border-r border-[#21262d] shadow-[inset_0_0_16px_rgba(0,0,0,0.4)]\n        transform transition-all duration-500 ease-out\n        ${isOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n        md:translate-x-0\n        ${isCollapsed ? \"w-14\" : \"w-full md:w-64\"}\n        ${className}\n      `}\n        style={{ overscrollBehavior: \"contain\" }}\n      >\n        {/* í—¤ë” - ì ‘íŒ ìƒíƒœì—ì„œëŠ” ìˆ¨ê¹€ */}\n        {!isCollapsed && (\n          <div className=\"flex items-center justify-between p-5 border-b border-[#21262d] relative transition-opacity duration-300 ease-in-out\">\n            <h1 className=\"text-xl font-semibold tracking-tight text-[#e6edf3]\">\n              TITLE-NOMICS\n            </h1>\n\n            {/* ë¯¸ë‹ˆë©€ í† ê¸€ ë²„íŠ¼ */}\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\"ì‚¬ì´ë“œë°” ì ‘ê¸°\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/* ì ‘íŒ ìƒíƒœ ì „ìš© í† ê¸€ ë²„íŠ¼ */}\n        {isCollapsed && (\n          <div className=\"p-2 flex justify-center border-b border-[#21262d]\">\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\"ì‚¬ì´ë“œë°” í¼ì¹˜ê¸°\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200 rotate-180\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/* ìƒˆ ëŒ€í™” ë²„íŠ¼ */}\n        {!isCollapsed && (\n          <div className=\"p-4 border-b border-[#21262d] transition-opacity duration-300 ease-in-out\">\n            <button\n              onClick={handleNewChat}\n              disabled={isCreating}\n              className=\"group w-full flex items-center justify-start gap-3 px-3 py-2.5 text-[#e6edf3] hover:bg-[#21262d] disabled:bg-[#374151] rounded-lg text-sm transition-all duration-200 focus:outline-none border border-[#6e7681] hover:border-[#8b949e]\"\n              title=\"ìƒˆ ì±„íŒ…\"\n            >\n              {isCreating ? (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-[#e6edf3]\"></div>\n                  </div>\n                  <span className=\"font-medium\">ìƒì„± ì¤‘...</span>\n                </>\n              ) : (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      strokeWidth=\"2\"\n                      stroke=\"currentColor\"\n                      className=\"h-4 w-4 group-hover:scale-110 transition-transform duration-200\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M12 4.5v15m7.5-7.5h-15\"\n                      />\n                    </svg>\n                  </div>\n                  <span className=\"font-medium\">ìƒˆ ì±„íŒ…</span>\n                </>\n              )}\n            </button>\n\n            {(createError || deleteError) && (\n              <div className=\"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-center\">\n                <p className=\"text-xs text-red-400\">\n                  {createError || deleteError}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* ëŒ€í™” ëª©ë¡ */}\n        <div\n          ref={conversationListRef}\n          className=\"flex flex-col gap-0.5 overflow-y-auto h-[calc(100vh-210px)] custom-scrollbar\"\n          onScroll={(e) => e.stopPropagation()}\n        >\n          <style jsx>{`\n            /* CSS Custom Properties for Design System */\n            .conversation-drawer {\n              --color-bg-primary: #0d1117;\n              --color-bg-secondary: #11161f;\n              --color-bg-tertiary: #161b22;\n              --color-border: #21262d;\n              --color-text-primary: #e6edf3;\n              --color-text-secondary: #88929d;\n              --color-accent: #10b981;\n              --color-accent-hover: #059669;\n              --color-danger: #f85149;\n              --shadow-depth: inset 0 0 16px rgba(0, 0, 0, 0.4);\n            }\n\n            .custom-scrollbar::-webkit-scrollbar {\n              width: 8px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-track {\n              background: transparent;\n              border-radius: 4px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb {\n              background: var(--color-border);\n              border-radius: 4px;\n              border: 1px solid var(--color-bg-primary);\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n              background: #30363d;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:active {\n              background: #484f58;\n            }\n            .custom-scrollbar::-webkit-scrollbar-corner {\n              background: transparent;\n            }\n\n            /* ì‚¬ì´ë“œë°” ìŠ¤í¬ë¡¤ ê²©ë¦¬ */\n            .custom-scrollbar {\n              overscroll-behavior: contain;\n              scroll-behavior: smooth;\n            }\n          `}</style>\n\n          {error && !isCollapsed && (\n            <div className=\"p-4 text-center bg-red-900/30 rounded-lg border border-red-700/50 mb-4\">\n              <div className=\"text-red-300 text-sm font-medium\">{error}</div>\n            </div>\n          )}\n\n          {conversations.length === 0 && !loading && !error && !isCollapsed && (\n            <div className=\"p-6 text-center\">\n              <div className=\"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl flex items-center justify-center shadow-lg border border-gray-700/30\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth=\"1.5\"\n                  stroke=\"currentColor\"\n                  className=\"h-6 w-6 text-gray-400\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\"\n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-sm font-medium text-white mb-2 drop-shadow\">\n                ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤\n              </h3>\n              <p className=\"text-xs text-gray-400 leading-snug opacity-80\">\n                ìƒˆ ëŒ€í™”ë¥¼ ì‹œì‘í•´ì„œ AIì™€ ëŒ€í™”í•´ë³´ì„¸ìš”!\n              </p>\n            </div>\n          )}\n\n          {/* ë¡œë”© ìƒíƒœ */}\n          {loading && conversations.length === 0 && !isCollapsed && (\n            <div className=\"flex flex-col gap-1\">\n              {[...Array(5)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"w-full h-10 px-3 bg-gray-900/40 animate-pulse flex items-center\"\n                >\n                  <div className=\"h-3 bg-gray-700/40 rounded w-3/4\"></div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* ë”¥ì‹œí¬ ìŠ¤íƒ€ì¼ ëŒ€í™” ëª©ë¡ */}\n          {!isCollapsed && conversations.length > 0 && (\n            <div className=\"flex flex-col gap-1 transition-opacity duration-300 ease-in-out\">\n              {Object.entries(conversationGroups).map(\n                ([groupTitle, groupConversations]) => (\n                  <div key={groupTitle}>\n                    {/* ë‚ ì§œ ê·¸ë£¹ í—¤ë” */}\n                    <div className=\"text-xs text-white/40 uppercase tracking-wide py-2 px-3 font-medium\">\n                      {groupTitle}\n                    </div>\n\n                    {/* ê·¸ë£¹ ë‚´ ëŒ€í™”ë“¤ */}\n                    {groupConversations.map((conversation) => (\n                      <div\n                        key={conversation.id}\n                        className={`\n                        flex items-center justify-between h-10 px-3 py-2 text-sm transition-colors duration-200 relative\n                        ${\n                          currentConversationId === conversation.id\n                            ? \"bg-[#161b22] text-[#e6edf3] relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-[2px] before:bg-[#10b981]\"\n                            : \"text-[#88929d] hover:bg-[#11161f] hover:text-[#e6edf3]\"\n                        }\n                      `}\n                      >\n                        {editingId === conversation.id ? (\n                          // ìˆ˜ì • ëª¨ë“œ\n                          <div className=\"flex-1 flex items-center gap-2\">\n                            <input\n                              type=\"text\"\n                              value={editingTitle}\n                              onChange={(e) => setEditingTitle(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === \"Enter\") {\n                                  handleSaveEdit(conversation.id);\n                                } else if (e.key === \"Escape\") {\n                                  handleCancelEdit();\n                                }\n                              }}\n                              className=\"flex-1 bg-[#0d1117] border border-[#21262d] rounded px-2 py-1 text-sm text-[#e6edf3] focus:outline-none focus:border-[#10b981]\"\n                              autoFocus\n                            />\n                            <button\n                              onClick={() => handleSaveEdit(conversation.id)}\n                              className=\"p-1 text-[#10b981] hover:bg-[#161b22] rounded\"\n                              title=\"ì €ì¥\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"m4.5 12.75 6 6 9-13.5\"\n                                />\n                              </svg>\n                            </button>\n                            <button\n                              onClick={handleCancelEdit}\n                              className=\"p-1 text-[#88929d] hover:text-[#f85149] hover:bg-[#161b22] rounded\"\n                              title=\"ì·¨ì†Œ\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"M6 18L18 6M6 6l12 12\"\n                                />\n                              </svg>\n                            </button>\n                          </div>\n                        ) : (\n                          // ì¼ë°˜ ëª¨ë“œ\n                          <>\n                            <button\n                              onClick={() =>\n                                handleSelectConversation(conversation.id)\n                              }\n                              className=\"flex-1 text-left truncate focus:outline-none py-2\"\n                              title={conversation.title}\n                            >\n                              <span className=\"truncate text-sm font-medium\">\n                                {conversation.title || \"ìƒˆ ëŒ€í™”\"}\n                              </span>\n                            </button>\n\n                            {/* ë©”ë‰´ ë²„íŠ¼ */}\n                            <div className=\"conversation-menu relative\">\n                              <button\n                                onClick={(e) =>\n                                  handleToggleMenu(conversation.id, e)\n                                }\n                                className=\"ml-2 py-2 px-2 text-[#88929d] hover:text-[#e6edf3] transition-colors duration-200 flex-shrink-0 rounded-md hover:bg-[#161b22]\"\n                                title=\"ë©”ë‰´\"\n                              >\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  strokeWidth=\"1.5\"\n                                  stroke=\"currentColor\"\n                                  className=\"h-5 w-5\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    d=\"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"\n                                  />\n                                </svg>\n                              </button>\n\n                              {/* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}\n                              {activeMenuId === conversation.id && (\n                                <div className=\"absolute right-0 top-full mt-1 bg-[#21262d] border border-[#30363d] rounded-md shadow-lg z-50 min-w-[120px]\">\n                                  <button\n                                    onClick={(e) =>\n                                      handleStartEdit(\n                                        conversation.id,\n                                        conversation.title,\n                                        e\n                                      )\n                                    }\n                                    className=\"w-full px-3 py-2 text-sm text-[#e6edf3] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200\"\n                                  >\n                                    <svg\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                      fill=\"none\"\n                                      viewBox=\"0 0 24 24\"\n                                      strokeWidth=\"1.5\"\n                                      stroke=\"currentColor\"\n                                      className=\"h-4 w-4\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n                                      />\n                                    </svg>\n                                    ìˆ˜ì •\n                                  </button>\n                                  <button\n                                    onClick={(e) =>\n                                      handleDeleteConversation(\n                                        conversation.id,\n                                        e\n                                      )\n                                    }\n                                    disabled={deletingId === conversation.id}\n                                    className=\"w-full px-3 py-2 text-sm text-[#f85149] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200 disabled:opacity-50\"\n                                  >\n                                    {deletingId === conversation.id ? (\n                                      <div className=\"animate-spin rounded-full h-4 w-4 border-b border-[#f85149]\"></div>\n                                    ) : (\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        fill=\"none\"\n                                        viewBox=\"0 0 24 24\"\n                                        strokeWidth=\"1.5\"\n                                        stroke=\"currentColor\"\n                                        className=\"h-4 w-4\"\n                                      >\n                                        <path\n                                          strokeLinecap=\"round\"\n                                          strokeLinejoin=\"round\"\n                                          d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n                                        />\n                                      </svg>\n                                    )}\n                                    ì‚­ì œ\n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )\n              )}\n            </div>\n          )}\n\n          {/* ì ‘íŒ ìƒíƒœ ìƒˆ ëŒ€í™” ë²„íŠ¼ë§Œ í‘œì‹œ */}\n          {isCollapsed && (\n            <div className=\"flex flex-col items-center p-2 transition-opacity duration-300 ease-in-out\">\n              <button\n                onClick={handleNewChat}\n                disabled={isCreating}\n                className=\"w-10 h-10 bg-[#21262d] hover:bg-[#30363d] disabled:bg-[#374151] text-white rounded-full flex items-center justify-center transition-colors duration-200 focus:outline-none border border-[#30363d] hover:border-[#444c56]\"\n                title=\"ìƒˆ ëŒ€í™”\"\n              >\n                {isCreating ? (\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                ) : (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth=\"2\"\n                    stroke=\"currentColor\"\n                    className=\"h-6 w-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M12 4.5v15m7.5-7.5h-15\"\n                    />\n                  </svg>\n                )}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* ì¶”ê°€ ë¡œë”© ì¸ë””ì¼€ì´í„° - ë” ë§ì€ ëŒ€í™” ë¡œë“œ ì‹œ */}\n        {loading && conversations.length > 0 && (\n          <div className=\"p-4 text-center\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mx-auto\"></div>\n          </div>\n        )}\n\n        {/* ë” ë³´ê¸° ë²„íŠ¼ */}\n        {hasMore && !loading && conversations.length > 0 && !isCollapsed && (\n          <div className=\"p-4 text-center\">\n            <button\n              onClick={loadMore}\n              className=\"text-xs text-white/60 hover:text-white/80 transition-colors duration-200 px-3 py-1.5 hover:bg-gray-800/40 rounded\"\n            >\n              ë” ë³´ê¸°\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default ConversationDrawer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}