{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { generateAPI } from \"../services/api\";\n\n/**\n * Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìñâ Î∞è Í≤∞Í≥º Ìè¥ÎßÅÏùÑ ÏúÑÌïú Ïª§Ïä§ÌÖÄ ÌõÖ\n * @param {string} projectId - ÌîÑÎ°úÏ†ùÌä∏ ID\n * @returns {Object} - Ï†úÎ™© ÏÉùÏÑ± Í¥ÄÎ†® ÏÉÅÌÉúÏôÄ Ìï®ÏàòÎì§\n */\nexport const useOrchestration = projectId => {\n  _s();\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentExecution, setCurrentExecution] = useState(null);\n  const [executionStatus, setExecutionStatus] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  /**\n   * Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìñâ\n   * @param {string} userInput - ÏÇ¨Ïö©Ïûê ÏûÖÎ†•\n   * @param {Object} options - Ï∂îÍ∞Ä ÏòµÏÖò (Ïòà: chat_history, useStreaming)\n   * @returns {Promise<Object>} - ÏÉùÏÑ± Í≤∞Í≥º\n   */\n  const executeOrchestration = useCallback(async (userInput, options = {}) => {\n    if (!userInput.trim()) {\n      toast.error(\"Î©îÏãúÏßÄÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.\");\n      return null;\n    }\n    try {\n      setIsExecuting(true);\n      setExecutionStatus(\"STARTING\");\n\n      // chat_historyÏôÄ userInputÏùÑ Ìè¨Ìï®ÌïòÎäî data Í∞ùÏ≤¥ ÏÉùÏÑ±\n      const data = {\n        userInput: userInput,\n        chat_history: options.chat_history || []\n      };\n      console.log(\"üöÄ ÎåÄÌôî ÏÉùÏÑ± ÏöîÏ≤≠ ÏãúÏûë:\", {\n        projectId,\n        inputLength: userInput.length,\n        historyLength: data.chat_history.length,\n        useStreaming: options.useStreaming === true,\n        timestamp: new Date().toISOString()\n      });\n\n      // üîß Ïä§Ìä∏Î¶¨Î∞ç ÏÇ¨Ïö© Ïó¨Î∂Ä ÌôïÏù∏ - Îçî ÏïàÏ†ÑÌïú Î°úÏßÅ\n      if (options.useStreaming === true) {\n        setIsStreaming(true);\n\n        // Ïä§Ìä∏Î¶¨Î∞ç ÏΩúÎ∞± Ìï®Ïàò ÏÑ§Ï†ï\n        const onChunk = options.onChunk || (() => {});\n        const onError = error => {\n          var _error$message, _error$message2, _error$message3, _error$message4;\n          console.error(\"üîß Ïä§Ìä∏Î¶¨Î∞ç Ïò§Î•ò Ï≤òÎ¶¨:\", error);\n          setIsExecuting(false);\n          setIsStreaming(false);\n          setExecutionStatus(\"FAILED\");\n\n          // üîß Í∞úÏÑ†: Ïò§Î•ò ÌÉÄÏûÖÏóê Îî∞Î•∏ Ï†ÅÏ†àÌïú Î©îÏãúÏßÄ\n          if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes(\"Gateway Timeout\") || (_error$message2 = error.message) !== null && _error$message2 !== void 0 && _error$message2.includes(\"504\") || error.code === \"ECONNABORTED\") {\n            toast.error(\"ÏÑúÎ≤Ñ ÏùëÎãµ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏöîÏ≤≠ÏùÑ Í∞ÑÎã®Ìûà ÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n          } else if ((_error$message3 = error.message) !== null && _error$message3 !== void 0 && _error$message3.includes(\"CORS\") || (_error$message4 = error.message) !== null && _error$message4 !== void 0 && _error$message4.includes(\"Network Error\")) {\n            toast.error(\"ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n          } else {\n            toast.error(\"Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n          }\n          if (options.onError) options.onError(error);\n        };\n        const onComplete = response => {\n          var _response$result;\n          console.log(\"‚úÖ Ïä§Ìä∏Î¶¨Î∞ç ÏôÑÎ£å:\", {\n            resultLength: ((_response$result = response.result) === null || _response$result === void 0 ? void 0 : _response$result.length) || 0,\n            timestamp: new Date().toISOString()\n          });\n          setIsExecuting(false);\n          setIsStreaming(false);\n          setExecutionStatus(\"COMPLETED\");\n          if (options.onComplete) options.onComplete(response);\n        };\n        try {\n          // üîß Í∞úÏÑ†: Ïä§Ìä∏Î¶¨Î∞ç API Ìò∏Ï∂ú (ÎÇ¥Î∂ÄÏóêÏÑú Ìè¥Î∞± Ï≤òÎ¶¨Îê®)\n          return await generateAPI.generateTitleStream(projectId, data, onChunk, onError, onComplete);\n        } catch (streamError) {\n          console.error(\"üîß Ïä§Ìä∏Î¶¨Î∞ç ÏµúÏ¢Ö Ïã§Ìå®:\", streamError);\n\n          // üîß Ïä§Ìä∏Î¶¨Î∞ç ÏôÑÏ†Ñ Ïã§Ìå® ÏãúÏóêÎèÑ Ìè¥Î∞±Ïù¥ ÎÇ¥Î∂ÄÏóêÏÑú Ï≤òÎ¶¨ÎêòÎØÄÎ°ú\n          // Ïó¨Í∏∞ÏÑúÎäî ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏïåÎ¶ºÎßå\n          setIsStreaming(false);\n          setIsExecuting(false);\n          setExecutionStatus(\"FAILED\");\n\n          // ÏµúÏ¢Ö Ïã§Ìå® Î©îÏãúÏßÄ\n          toast.error(\"ÏÑúÎπÑÏä§Ïóê ÏùºÏãúÏ†ÅÏù∏ Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n          throw streamError;\n        }\n      }\n\n      // üîß ÏùºÎ∞ò API Ìò∏Ï∂ú (Ïä§Ìä∏Î¶¨Î∞ç ÎØ∏ÏÇ¨Ïö©)\n      console.log(\"üìÑ ÏùºÎ∞ò API Ìò∏Ï∂ú ÏãúÏûë...\");\n      const response = await generateAPI.generateTitle(projectId, data);\n      console.log(\"‚úÖ ÎåÄÌôî ÏÉùÏÑ± ÏôÑÎ£å:\", {\n        mode: response.mode,\n        message: response.message,\n        timestamp: new Date().toISOString()\n      });\n      setIsExecuting(false);\n      setExecutionStatus(\"COMPLETED\");\n      return response;\n    } catch (error) {\n      var _error$response, _error$response2, _error$message5, _error$response3, _error$response4, _error$response4$data, _error$response5, _error$response6, _error$response7;\n      console.error(\"‚ùå Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìå®:\", {\n        error: error.message,\n        code: error.code,\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n        timestamp: new Date().toISOString()\n      });\n      setIsExecuting(false);\n      setIsStreaming(false);\n      setExecutionStatus(\"FAILED\");\n\n      // üîß Í∞úÏÑ†: ÏÉÅÏÑ∏Ìïú Ïò§Î•ò Ï≤òÎ¶¨\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 504) {\n        toast.error(\"ÏÑúÎ≤Ñ ÏùëÎãµ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏûÖÎ†•ÏùÑ Í∞ÑÏÜåÌôîÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      } else if ((_error$message5 = error.message) !== null && _error$message5 !== void 0 && _error$message5.includes(\"CORS\") || error.code === \"ERR_NETWORK\") {\n        toast.error(\"ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 400 && (_error$response4 = error.response) !== null && _error$response4 !== void 0 && (_error$response4$data = _error$response4.data) !== null && _error$response4$data !== void 0 && _error$response4$data.setup_required) {\n        toast.error(\"ÌîÑÎ°¨ÌîÑÌä∏ Ïπ¥ÎìúÎ•º Î®ºÏ†Ä ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî!\");\n      } else if (error.code === \"ECONNABORTED\") {\n        toast.error(\"ÏöîÏ≤≠ Ï≤òÎ¶¨ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏûÖÎ†•ÏùÑ Ï§ÑÏù¥Í±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      } else if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 500) {\n        toast.error(\"ÏÑúÎ≤ÑÏóê ÏùºÏãúÏ†ÅÏù∏ Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      } else if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 403) {\n        toast.error(\"Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§. Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.\");\n      } else if (((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.status) === 429) {\n        toast.error(\"ÏöîÏ≤≠Ïù¥ ÎÑàÎ¨¥ ÎßéÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      } else {\n        toast.error(\"Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n      }\n      throw error;\n    }\n  }, [projectId]);\n\n  /**\n   * Ïã§Ìñâ ÏÉÅÌÉú Ï°∞Ìöå (Step Functions ÏÇ¨Ïö© Ïãú)\n   * @param {string} executionArn - Ïã§Ìñâ ARN\n   * @param {Function} onComplete - ÏôÑÎ£å Ïãú ÏΩúÎ∞±\n   * @param {Function} onError - ÏóêÎü¨ Ïãú ÏΩúÎ∞±\n   */\n  const pollOrchestrationResult = useCallback(async (executionArn, onComplete, onError) => {\n    // Ïä§Ìä∏Î¶¨Î∞ç Î™®ÎìúÏóêÏÑúÎäî Ìè¥ÎßÅÏù¥ ÌïÑÏöî ÏóÜÏùå\n    if (isStreaming) {\n      return;\n    }\n    const poll = async () => {\n      try {\n        const result = await generateAPI.getExecutionStatus(executionArn);\n        setExecutionStatus(result.status);\n        if (result.status === \"SUCCEEDED\") {\n          setIsExecuting(false);\n          setExecutionStatus(\"COMPLETED\");\n          if (onComplete) {\n            onComplete(result);\n          }\n        } else if (result.status === \"FAILED\") {\n          setIsExecuting(false);\n          setExecutionStatus(\"FAILED\");\n          if (onError) {\n            onError(new Error(\"Ï≤òÎ¶¨ Ïã§Ìå®\"));\n          }\n        } else if (result.status === \"RUNNING\") {\n          // 3Ï¥à ÌõÑ Îã§Ïãú Ìè¥ÎßÅ\n          setTimeout(poll, 3000);\n        }\n      } catch (error) {\n        console.error(\"Ïã§Ìñâ ÏÉÅÌÉú Ï°∞Ìöå Ïã§Ìå®:\", error);\n        setIsExecuting(false);\n        setExecutionStatus(\"FAILED\");\n        if (onError) {\n          onError(error);\n        }\n      }\n    };\n    poll();\n  }, [projectId, isStreaming]);\n\n  /**\n   * Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî\n   */\n  const resetOrchestration = useCallback(() => {\n    setIsExecuting(false);\n    setIsStreaming(false);\n    setCurrentExecution(null);\n    setExecutionStatus(null);\n  }, []);\n  return {\n    isExecuting,\n    isStreaming,\n    currentExecution,\n    executionStatus,\n    executeOrchestration,\n    pollOrchestrationResult,\n    resetOrchestration\n  };\n};\n_s(useOrchestration, \"dycC0VGflW0bdLmxCDlLdpde9RQ=\");","map":{"version":3,"names":["useState","useCallback","toast","generateAPI","useOrchestration","projectId","_s","isExecuting","setIsExecuting","currentExecution","setCurrentExecution","executionStatus","setExecutionStatus","isStreaming","setIsStreaming","executeOrchestration","userInput","options","trim","error","data","chat_history","console","log","inputLength","length","historyLength","useStreaming","timestamp","Date","toISOString","onChunk","onError","_error$message","_error$message2","_error$message3","_error$message4","message","includes","code","onComplete","response","_response$result","resultLength","result","generateTitleStream","streamError","generateTitle","mode","_error$response","_error$response2","_error$message5","_error$response3","_error$response4","_error$response4$data","_error$response5","_error$response6","_error$response7","status","setup_required","pollOrchestrationResult","executionArn","poll","getExecutionStatus","Error","setTimeout","resetOrchestration"],"sources":["/Users/yeong-gwang/Documents/work/·Ñâ·Ö•·Ñã·ÖÆ·ÜØ·ÑÄ·Öß·Üº·Ñå·Ö¶·Ñâ·Öµ·Ü´·ÑÜ·ÖÆ·Ü´/ai_·Ñå·Ö¶·ÑÜ·Ö©·Ü®·ÑÉ·Ö°·ÜØ·ÑÄ·Öµ(·Ñâ·ÖÆ)_·Ñã·Ö™·Ü´·Ñâ·Ö•·Üº·Ñá·Ö©·Ü´_·Ñâ·Ö≥·Ñê·Ö≥·ÑÖ·Öµ·ÑÜ·Öµ·Üº·ÑÄ·ÖÆ·Ñí·Öß·Ü´ ·Ñá·Ö©·Ü®·Ñâ·Ö°·Ñá·Ö©·Ü´/frontend/src/hooks/useOrchestration.js"],"sourcesContent":["import { useState, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { generateAPI } from \"../services/api\";\n\n/**\n * Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìñâ Î∞è Í≤∞Í≥º Ìè¥ÎßÅÏùÑ ÏúÑÌïú Ïª§Ïä§ÌÖÄ ÌõÖ\n * @param {string} projectId - ÌîÑÎ°úÏ†ùÌä∏ ID\n * @returns {Object} - Ï†úÎ™© ÏÉùÏÑ± Í¥ÄÎ†® ÏÉÅÌÉúÏôÄ Ìï®ÏàòÎì§\n */\nexport const useOrchestration = (projectId) => {\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentExecution, setCurrentExecution] = useState(null);\n  const [executionStatus, setExecutionStatus] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  /**\n   * Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìñâ\n   * @param {string} userInput - ÏÇ¨Ïö©Ïûê ÏûÖÎ†•\n   * @param {Object} options - Ï∂îÍ∞Ä ÏòµÏÖò (Ïòà: chat_history, useStreaming)\n   * @returns {Promise<Object>} - ÏÉùÏÑ± Í≤∞Í≥º\n   */\n  const executeOrchestration = useCallback(\n    async (userInput, options = {}) => {\n      if (!userInput.trim()) {\n        toast.error(\"Î©îÏãúÏßÄÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.\");\n        return null;\n      }\n\n      try {\n        setIsExecuting(true);\n        setExecutionStatus(\"STARTING\");\n\n        // chat_historyÏôÄ userInputÏùÑ Ìè¨Ìï®ÌïòÎäî data Í∞ùÏ≤¥ ÏÉùÏÑ±\n        const data = {\n          userInput: userInput,\n          chat_history: options.chat_history || [],\n        };\n\n        console.log(\"üöÄ ÎåÄÌôî ÏÉùÏÑ± ÏöîÏ≤≠ ÏãúÏûë:\", {\n          projectId,\n          inputLength: userInput.length,\n          historyLength: data.chat_history.length,\n          useStreaming: options.useStreaming === true,\n          timestamp: new Date().toISOString(),\n        });\n\n        // üîß Ïä§Ìä∏Î¶¨Î∞ç ÏÇ¨Ïö© Ïó¨Î∂Ä ÌôïÏù∏ - Îçî ÏïàÏ†ÑÌïú Î°úÏßÅ\n        if (options.useStreaming === true) {\n          setIsStreaming(true);\n\n          // Ïä§Ìä∏Î¶¨Î∞ç ÏΩúÎ∞± Ìï®Ïàò ÏÑ§Ï†ï\n          const onChunk = options.onChunk || (() => {});\n          const onError = (error) => {\n            console.error(\"üîß Ïä§Ìä∏Î¶¨Î∞ç Ïò§Î•ò Ï≤òÎ¶¨:\", error);\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"FAILED\");\n\n            // üîß Í∞úÏÑ†: Ïò§Î•ò ÌÉÄÏûÖÏóê Îî∞Î•∏ Ï†ÅÏ†àÌïú Î©îÏãúÏßÄ\n            if (\n              error.message?.includes(\"Gateway Timeout\") ||\n              error.message?.includes(\"504\") ||\n              error.code === \"ECONNABORTED\"\n            ) {\n              toast.error(\n                \"ÏÑúÎ≤Ñ ÏùëÎãµ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏöîÏ≤≠ÏùÑ Í∞ÑÎã®Ìûà ÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n              );\n            } else if (\n              error.message?.includes(\"CORS\") ||\n              error.message?.includes(\"Network Error\")\n            ) {\n              toast.error(\n                \"ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n              );\n            } else {\n              toast.error(\n                \"Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n              );\n            }\n\n            if (options.onError) options.onError(error);\n          };\n\n          const onComplete = (response) => {\n            console.log(\"‚úÖ Ïä§Ìä∏Î¶¨Î∞ç ÏôÑÎ£å:\", {\n              resultLength: response.result?.length || 0,\n              timestamp: new Date().toISOString(),\n            });\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"COMPLETED\");\n            if (options.onComplete) options.onComplete(response);\n          };\n\n          try {\n            // üîß Í∞úÏÑ†: Ïä§Ìä∏Î¶¨Î∞ç API Ìò∏Ï∂ú (ÎÇ¥Î∂ÄÏóêÏÑú Ìè¥Î∞± Ï≤òÎ¶¨Îê®)\n            return await generateAPI.generateTitleStream(\n              projectId,\n              data,\n              onChunk,\n              onError,\n              onComplete\n            );\n          } catch (streamError) {\n            console.error(\"üîß Ïä§Ìä∏Î¶¨Î∞ç ÏµúÏ¢Ö Ïã§Ìå®:\", streamError);\n\n            // üîß Ïä§Ìä∏Î¶¨Î∞ç ÏôÑÏ†Ñ Ïã§Ìå® ÏãúÏóêÎèÑ Ìè¥Î∞±Ïù¥ ÎÇ¥Î∂ÄÏóêÏÑú Ï≤òÎ¶¨ÎêòÎØÄÎ°ú\n            // Ïó¨Í∏∞ÏÑúÎäî ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏïåÎ¶ºÎßå\n            setIsStreaming(false);\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            // ÏµúÏ¢Ö Ïã§Ìå® Î©îÏãúÏßÄ\n            toast.error(\n              \"ÏÑúÎπÑÏä§Ïóê ÏùºÏãúÏ†ÅÏù∏ Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n            );\n            throw streamError;\n          }\n        }\n\n        // üîß ÏùºÎ∞ò API Ìò∏Ï∂ú (Ïä§Ìä∏Î¶¨Î∞ç ÎØ∏ÏÇ¨Ïö©)\n        console.log(\"üìÑ ÏùºÎ∞ò API Ìò∏Ï∂ú ÏãúÏûë...\");\n        const response = await generateAPI.generateTitle(projectId, data);\n\n        console.log(\"‚úÖ ÎåÄÌôî ÏÉùÏÑ± ÏôÑÎ£å:\", {\n          mode: response.mode,\n          message: response.message,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setExecutionStatus(\"COMPLETED\");\n\n        return response;\n      } catch (error) {\n        console.error(\"‚ùå Ï†úÎ™© ÏÉùÏÑ± Ïã§Ìå®:\", {\n          error: error.message,\n          code: error.code,\n          status: error.response?.status,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setIsStreaming(false);\n        setExecutionStatus(\"FAILED\");\n\n        // üîß Í∞úÏÑ†: ÏÉÅÏÑ∏Ìïú Ïò§Î•ò Ï≤òÎ¶¨\n        if (error.response?.status === 504) {\n          toast.error(\n            \"ÏÑúÎ≤Ñ ÏùëÎãµ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏûÖÎ†•ÏùÑ Í∞ÑÏÜåÌôîÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n          );\n        } else if (\n          error.message?.includes(\"CORS\") ||\n          error.code === \"ERR_NETWORK\"\n        ) {\n          toast.error(\n            \"ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n          );\n        } else if (\n          error.response?.status === 400 &&\n          error.response?.data?.setup_required\n        ) {\n          toast.error(\"ÌîÑÎ°¨ÌîÑÌä∏ Ïπ¥ÎìúÎ•º Î®ºÏ†Ä ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî!\");\n        } else if (error.code === \"ECONNABORTED\") {\n          toast.error(\n            \"ÏöîÏ≤≠ Ï≤òÎ¶¨ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. ÏûÖÎ†•ÏùÑ Ï§ÑÏù¥Í±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n          );\n        } else if (error.response?.status === 500) {\n          toast.error(\n            \"ÏÑúÎ≤ÑÏóê ÏùºÏãúÏ†ÅÏù∏ Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n          );\n        } else if (error.response?.status === 403) {\n          toast.error(\"Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§. Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.\");\n        } else if (error.response?.status === 429) {\n          toast.error(\"ÏöîÏ≤≠Ïù¥ ÎÑàÎ¨¥ ÎßéÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\");\n        } else {\n          toast.error(\n            \"Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\"\n          );\n        }\n\n        throw error;\n      }\n    },\n    [projectId]\n  );\n\n  /**\n   * Ïã§Ìñâ ÏÉÅÌÉú Ï°∞Ìöå (Step Functions ÏÇ¨Ïö© Ïãú)\n   * @param {string} executionArn - Ïã§Ìñâ ARN\n   * @param {Function} onComplete - ÏôÑÎ£å Ïãú ÏΩúÎ∞±\n   * @param {Function} onError - ÏóêÎü¨ Ïãú ÏΩúÎ∞±\n   */\n  const pollOrchestrationResult = useCallback(\n    async (executionArn, onComplete, onError) => {\n      // Ïä§Ìä∏Î¶¨Î∞ç Î™®ÎìúÏóêÏÑúÎäî Ìè¥ÎßÅÏù¥ ÌïÑÏöî ÏóÜÏùå\n      if (isStreaming) {\n        return;\n      }\n\n      const poll = async () => {\n        try {\n          const result = await generateAPI.getExecutionStatus(executionArn);\n\n          setExecutionStatus(result.status);\n\n          if (result.status === \"SUCCEEDED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"COMPLETED\");\n\n            if (onComplete) {\n              onComplete(result);\n            }\n          } else if (result.status === \"FAILED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            if (onError) {\n              onError(new Error(\"Ï≤òÎ¶¨ Ïã§Ìå®\"));\n            }\n          } else if (result.status === \"RUNNING\") {\n            // 3Ï¥à ÌõÑ Îã§Ïãú Ìè¥ÎßÅ\n            setTimeout(poll, 3000);\n          }\n        } catch (error) {\n          console.error(\"Ïã§Ìñâ ÏÉÅÌÉú Ï°∞Ìöå Ïã§Ìå®:\", error);\n          setIsExecuting(false);\n          setExecutionStatus(\"FAILED\");\n\n          if (onError) {\n            onError(error);\n          }\n        }\n      };\n\n      poll();\n    },\n    [projectId, isStreaming]\n  );\n\n  /**\n   * Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî\n   */\n  const resetOrchestration = useCallback(() => {\n    setIsExecuting(false);\n    setIsStreaming(false);\n    setCurrentExecution(null);\n    setExecutionStatus(null);\n  }, []);\n\n  return {\n    isExecuting,\n    isStreaming,\n    currentExecution,\n    executionStatus,\n    executeOrchestration,\n    pollOrchestrationResult,\n    resetOrchestration,\n  };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,WAAW,QAAQ,iBAAiB;;AAE7C;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,GAAIC,SAAS,IAAK;EAAAC,EAAA;EAC7C,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACS,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACW,eAAe,EAAEC,kBAAkB,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;;EAErD;AACF;AACA;AACA;AACA;AACA;EACE,MAAMe,oBAAoB,GAAGd,WAAW,CACtC,OAAOe,SAAS,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IACjC,IAAI,CAACD,SAAS,CAACE,IAAI,CAAC,CAAC,EAAE;MACrBhB,KAAK,CAACiB,KAAK,CAAC,cAAc,CAAC;MAC3B,OAAO,IAAI;IACb;IAEA,IAAI;MACFX,cAAc,CAAC,IAAI,CAAC;MACpBI,kBAAkB,CAAC,UAAU,CAAC;;MAE9B;MACA,MAAMQ,IAAI,GAAG;QACXJ,SAAS,EAAEA,SAAS;QACpBK,YAAY,EAAEJ,OAAO,CAACI,YAAY,IAAI;MACxC,CAAC;MAEDC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;QAC7BlB,SAAS;QACTmB,WAAW,EAAER,SAAS,CAACS,MAAM;QAC7BC,aAAa,EAAEN,IAAI,CAACC,YAAY,CAACI,MAAM;QACvCE,YAAY,EAAEV,OAAO,CAACU,YAAY,KAAK,IAAI;QAC3CC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC;;MAEF;MACA,IAAIb,OAAO,CAACU,YAAY,KAAK,IAAI,EAAE;QACjCb,cAAc,CAAC,IAAI,CAAC;;QAEpB;QACA,MAAMiB,OAAO,GAAGd,OAAO,CAACc,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;QAC7C,MAAMC,OAAO,GAAIb,KAAK,IAAK;UAAA,IAAAc,cAAA,EAAAC,eAAA,EAAAC,eAAA,EAAAC,eAAA;UACzBd,OAAO,CAACH,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;UACtCX,cAAc,CAAC,KAAK,CAAC;UACrBM,cAAc,CAAC,KAAK,CAAC;UACrBF,kBAAkB,CAAC,QAAQ,CAAC;;UAE5B;UACA,IACE,CAAAqB,cAAA,GAAAd,KAAK,CAACkB,OAAO,cAAAJ,cAAA,eAAbA,cAAA,CAAeK,QAAQ,CAAC,iBAAiB,CAAC,KAAAJ,eAAA,GAC1Cf,KAAK,CAACkB,OAAO,cAAAH,eAAA,eAAbA,eAAA,CAAeI,QAAQ,CAAC,KAAK,CAAC,IAC9BnB,KAAK,CAACoB,IAAI,KAAK,cAAc,EAC7B;YACArC,KAAK,CAACiB,KAAK,CACT,gDACF,CAAC;UACH,CAAC,MAAM,IACL,CAAAgB,eAAA,GAAAhB,KAAK,CAACkB,OAAO,cAAAF,eAAA,eAAbA,eAAA,CAAeG,QAAQ,CAAC,MAAM,CAAC,KAAAF,eAAA,GAC/BjB,KAAK,CAACkB,OAAO,cAAAD,eAAA,eAAbA,eAAA,CAAeE,QAAQ,CAAC,eAAe,CAAC,EACxC;YACApC,KAAK,CAACiB,KAAK,CACT,oCACF,CAAC;UACH,CAAC,MAAM;YACLjB,KAAK,CAACiB,KAAK,CACT,kCACF,CAAC;UACH;UAEA,IAAIF,OAAO,CAACe,OAAO,EAAEf,OAAO,CAACe,OAAO,CAACb,KAAK,CAAC;QAC7C,CAAC;QAED,MAAMqB,UAAU,GAAIC,QAAQ,IAAK;UAAA,IAAAC,gBAAA;UAC/BpB,OAAO,CAACC,GAAG,CAAC,YAAY,EAAE;YACxBoB,YAAY,EAAE,EAAAD,gBAAA,GAAAD,QAAQ,CAACG,MAAM,cAAAF,gBAAA,uBAAfA,gBAAA,CAAiBjB,MAAM,KAAI,CAAC;YAC1CG,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;UACpC,CAAC,CAAC;UACFtB,cAAc,CAAC,KAAK,CAAC;UACrBM,cAAc,CAAC,KAAK,CAAC;UACrBF,kBAAkB,CAAC,WAAW,CAAC;UAC/B,IAAIK,OAAO,CAACuB,UAAU,EAAEvB,OAAO,CAACuB,UAAU,CAACC,QAAQ,CAAC;QACtD,CAAC;QAED,IAAI;UACF;UACA,OAAO,MAAMtC,WAAW,CAAC0C,mBAAmB,CAC1CxC,SAAS,EACTe,IAAI,EACJW,OAAO,EACPC,OAAO,EACPQ,UACF,CAAC;QACH,CAAC,CAAC,OAAOM,WAAW,EAAE;UACpBxB,OAAO,CAACH,KAAK,CAAC,gBAAgB,EAAE2B,WAAW,CAAC;;UAE5C;UACA;UACAhC,cAAc,CAAC,KAAK,CAAC;UACrBN,cAAc,CAAC,KAAK,CAAC;UACrBI,kBAAkB,CAAC,QAAQ,CAAC;;UAE5B;UACAV,KAAK,CAACiB,KAAK,CACT,qCACF,CAAC;UACD,MAAM2B,WAAW;QACnB;MACF;;MAEA;MACAxB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjC,MAAMkB,QAAQ,GAAG,MAAMtC,WAAW,CAAC4C,aAAa,CAAC1C,SAAS,EAAEe,IAAI,CAAC;MAEjEE,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE;QACzByB,IAAI,EAAEP,QAAQ,CAACO,IAAI;QACnBX,OAAO,EAAEI,QAAQ,CAACJ,OAAO;QACzBT,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC;MAEFtB,cAAc,CAAC,KAAK,CAAC;MACrBI,kBAAkB,CAAC,WAAW,CAAC;MAE/B,OAAO6B,QAAQ;IACjB,CAAC,CAAC,OAAOtB,KAAK,EAAE;MAAA,IAAA8B,eAAA,EAAAC,gBAAA,EAAAC,eAAA,EAAAC,gBAAA,EAAAC,gBAAA,EAAAC,qBAAA,EAAAC,gBAAA,EAAAC,gBAAA,EAAAC,gBAAA;MACdnC,OAAO,CAACH,KAAK,CAAC,aAAa,EAAE;QAC3BA,KAAK,EAAEA,KAAK,CAACkB,OAAO;QACpBE,IAAI,EAAEpB,KAAK,CAACoB,IAAI;QAChBmB,MAAM,GAAAT,eAAA,GAAE9B,KAAK,CAACsB,QAAQ,cAAAQ,eAAA,uBAAdA,eAAA,CAAgBS,MAAM;QAC9B9B,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC;MAEFtB,cAAc,CAAC,KAAK,CAAC;MACrBM,cAAc,CAAC,KAAK,CAAC;MACrBF,kBAAkB,CAAC,QAAQ,CAAC;;MAE5B;MACA,IAAI,EAAAsC,gBAAA,GAAA/B,KAAK,CAACsB,QAAQ,cAAAS,gBAAA,uBAAdA,gBAAA,CAAgBQ,MAAM,MAAK,GAAG,EAAE;QAClCxD,KAAK,CAACiB,KAAK,CACT,+CACF,CAAC;MACH,CAAC,MAAM,IACL,CAAAgC,eAAA,GAAAhC,KAAK,CAACkB,OAAO,cAAAc,eAAA,eAAbA,eAAA,CAAeb,QAAQ,CAAC,MAAM,CAAC,IAC/BnB,KAAK,CAACoB,IAAI,KAAK,aAAa,EAC5B;QACArC,KAAK,CAACiB,KAAK,CACT,yCACF,CAAC;MACH,CAAC,MAAM,IACL,EAAAiC,gBAAA,GAAAjC,KAAK,CAACsB,QAAQ,cAAAW,gBAAA,uBAAdA,gBAAA,CAAgBM,MAAM,MAAK,GAAG,KAAAL,gBAAA,GAC9BlC,KAAK,CAACsB,QAAQ,cAAAY,gBAAA,gBAAAC,qBAAA,GAAdD,gBAAA,CAAgBjC,IAAI,cAAAkC,qBAAA,eAApBA,qBAAA,CAAsBK,cAAc,EACpC;QACAzD,KAAK,CAACiB,KAAK,CAAC,qBAAqB,CAAC;MACpC,CAAC,MAAM,IAAIA,KAAK,CAACoB,IAAI,KAAK,cAAc,EAAE;QACxCrC,KAAK,CAACiB,KAAK,CACT,6CACF,CAAC;MACH,CAAC,MAAM,IAAI,EAAAoC,gBAAA,GAAApC,KAAK,CAACsB,QAAQ,cAAAc,gBAAA,uBAAdA,gBAAA,CAAgBG,MAAM,MAAK,GAAG,EAAE;QACzCxD,KAAK,CAACiB,KAAK,CACT,oCACF,CAAC;MACH,CAAC,MAAM,IAAI,EAAAqC,gBAAA,GAAArC,KAAK,CAACsB,QAAQ,cAAAe,gBAAA,uBAAdA,gBAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;QACzCxD,KAAK,CAACiB,KAAK,CAAC,2BAA2B,CAAC;MAC1C,CAAC,MAAM,IAAI,EAAAsC,gBAAA,GAAAtC,KAAK,CAACsB,QAAQ,cAAAgB,gBAAA,uBAAdA,gBAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;QACzCxD,KAAK,CAACiB,KAAK,CAAC,8BAA8B,CAAC;MAC7C,CAAC,MAAM;QACLjB,KAAK,CAACiB,KAAK,CACT,2CACF,CAAC;MACH;MAEA,MAAMA,KAAK;IACb;EACF,CAAC,EACD,CAACd,SAAS,CACZ,CAAC;;EAED;AACF;AACA;AACA;AACA;AACA;EACE,MAAMuD,uBAAuB,GAAG3D,WAAW,CACzC,OAAO4D,YAAY,EAAErB,UAAU,EAAER,OAAO,KAAK;IAC3C;IACA,IAAInB,WAAW,EAAE;MACf;IACF;IAEA,MAAMiD,IAAI,GAAG,MAAAA,CAAA,KAAY;MACvB,IAAI;QACF,MAAMlB,MAAM,GAAG,MAAMzC,WAAW,CAAC4D,kBAAkB,CAACF,YAAY,CAAC;QAEjEjD,kBAAkB,CAACgC,MAAM,CAACc,MAAM,CAAC;QAEjC,IAAId,MAAM,CAACc,MAAM,KAAK,WAAW,EAAE;UACjClD,cAAc,CAAC,KAAK,CAAC;UACrBI,kBAAkB,CAAC,WAAW,CAAC;UAE/B,IAAI4B,UAAU,EAAE;YACdA,UAAU,CAACI,MAAM,CAAC;UACpB;QACF,CAAC,MAAM,IAAIA,MAAM,CAACc,MAAM,KAAK,QAAQ,EAAE;UACrClD,cAAc,CAAC,KAAK,CAAC;UACrBI,kBAAkB,CAAC,QAAQ,CAAC;UAE5B,IAAIoB,OAAO,EAAE;YACXA,OAAO,CAAC,IAAIgC,KAAK,CAAC,OAAO,CAAC,CAAC;UAC7B;QACF,CAAC,MAAM,IAAIpB,MAAM,CAACc,MAAM,KAAK,SAAS,EAAE;UACtC;UACAO,UAAU,CAACH,IAAI,EAAE,IAAI,CAAC;QACxB;MACF,CAAC,CAAC,OAAO3C,KAAK,EAAE;QACdG,OAAO,CAACH,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;QACpCX,cAAc,CAAC,KAAK,CAAC;QACrBI,kBAAkB,CAAC,QAAQ,CAAC;QAE5B,IAAIoB,OAAO,EAAE;UACXA,OAAO,CAACb,KAAK,CAAC;QAChB;MACF;IACF,CAAC;IAED2C,IAAI,CAAC,CAAC;EACR,CAAC,EACD,CAACzD,SAAS,EAAEQ,WAAW,CACzB,CAAC;;EAED;AACF;AACA;EACE,MAAMqD,kBAAkB,GAAGjE,WAAW,CAAC,MAAM;IAC3CO,cAAc,CAAC,KAAK,CAAC;IACrBM,cAAc,CAAC,KAAK,CAAC;IACrBJ,mBAAmB,CAAC,IAAI,CAAC;IACzBE,kBAAkB,CAAC,IAAI,CAAC;EAC1B,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLL,WAAW;IACXM,WAAW;IACXJ,gBAAgB;IAChBE,eAAe;IACfI,oBAAoB;IACpB6C,uBAAuB;IACvBM;EACF,CAAC;AACH,CAAC;AAAC5D,EAAA,CA1PWF,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}